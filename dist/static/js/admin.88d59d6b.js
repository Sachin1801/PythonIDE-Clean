(function(){"use strict";var e={248:function(e,t,a){var s=a(3751),r=a(720),o=(a(4188),a(1862),a(163)),n=a(7918),l=a(641);const i={id:"admin-app",class:"dark"};function u(e,t,a,s,r,o){const n=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(n)])}var d={name:"AdminApp",mounted(){document.documentElement.setAttribute("data-theme","dark"),document.documentElement.classList.add("dark")}},c=a(6262);const p=(0,c.A)(d,[["render",u]]);var m=p,h=a(5220),g=a(6278);const f="/api/admin/auth";var v={async login(e,t){const a=await fetch(`${f}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});return a.json()},async logout(e){const t=await fetch(`${f}/logout`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});return t.json()},async validateSession(e){const t=await fetch(`${f}/session`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});return t.json()},async renewSession(e){const t=await fetch(`${f}/session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});return t.json()}},b=a(6763);const _="admin_token",w="admin_user";var k={namespaced:!0,state:{token:localStorage.getItem(_)||null,user:JSON.parse(localStorage.getItem(w)||"null"),isAuthenticated:!1,loading:!1,error:null},mutations:{SET_TOKEN(e,t){e.token=t,t?localStorage.setItem(_,t):localStorage.removeItem(_)},SET_USER(e,t){e.user=t,t?localStorage.setItem(w,JSON.stringify(t)):localStorage.removeItem(w)},SET_AUTHENTICATED(e,t){e.isAuthenticated=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},CLEAR_AUTH(e){e.token=null,e.user=null,e.isAuthenticated=!1,localStorage.removeItem(_),localStorage.removeItem(w)}},actions:{async login({commit:e},{username:t,password:a}){e("SET_LOADING",!0),e("SET_ERROR",null);try{const s=await v.login(t,a);return s.success?(e("SET_TOKEN",s.token),e("SET_USER",s.user),e("SET_AUTHENTICATED",!0),{success:!0}):(e("SET_ERROR",s.error||"Login failed"),{success:!1,error:s.error})}catch(s){const t=s.response?.data?.error||s.message||"Login failed";return e("SET_ERROR",t),{success:!1,error:t}}finally{e("SET_LOADING",!1)}},async logout({commit:e,state:t}){try{t.token&&await v.logout(t.token)}catch(a){b.error("Logout error:",a)}finally{e("CLEAR_AUTH")}},async checkSession({commit:e,state:t}){if(!t.token)return e("SET_AUTHENTICATED",!1),!1;try{const a=await v.validateSession(t.token);return a.valid?(e("SET_USER",a.user),e("SET_AUTHENTICATED",!0),!0):(e("CLEAR_AUTH"),!1)}catch(a){return b.error("Session validation error:",a),e("CLEAR_AUTH"),!1}},async renewSession({commit:e,state:t}){if(!t.token)return!1;try{const e=await v.renewSession(t.token);return e.success}catch(a){return b.error("Session renewal error:",a),!1}}},getters:{isAuthenticated:e=>e.isAuthenticated,user:e=>e.user,token:e=>e.token,isLoading:e=>e.loading,error:e=>e.error,username:e=>e.user?.username||"",fullName:e=>e.user?.full_name||e.user?.username||""}};a(8111),a(2489),a(4603),a(7566),a(8721);const E="/api/admin/users";function y(e){const t=new URLSearchParams;for(const[a,s]of Object.entries(e))null!==s&&void 0!==s&&""!==s&&t.append(a,s);return t.toString()}var S={async getUsers(e,t={}){const a=y(t),s=a?`${E}?${a}`:E,r=await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${e}`}});return r.json()},async getUser(e,t){const a=await fetch(`${E}/${t}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});return a.json()},async createUser(e,t){const a=await fetch(E,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});return a.json()},async updateUser(e,t,a){const s=await fetch(`${E}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(a)});return s.json()},async deleteUser(e,t){const a=await fetch(`${E}/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}});return a.json()},async resetPassword(e,t,a=null){const s=a?{new_password:a}:{},r=await fetch(`${E}/${t}/reset-password`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)});return r.json()},async bulkImport(e,t){const a=new FormData;a.append("file",t);const s=await fetch(`${E}/bulk-import`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:a});return s.json()},async exportUsers(e,t={}){const a=y({...t,export:"true"}),s=`${E}?${a}`,r=await fetch(s,{method:"GET",headers:{Authorization:`Bearer ${e}`}});return r.blob()},async downloadTemplate(e){const t=await fetch(`${E}/bulk-import`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});return t.blob()}},L={namespaced:!0,state:{users:[],currentUser:null,total:0,page:1,limit:20,loading:!1,error:null,filters:{search:"",role:"",status:""},sortBy:"username",sortOrder:"asc"},mutations:{SET_USERS(e,t){e.users=t},SET_CURRENT_USER(e,t){e.currentUser=t},SET_TOTAL(e,t){e.total=t},SET_PAGE(e,t){e.page=t},SET_LIMIT(e,t){e.limit=t},SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},SET_FILTERS(e,t){e.filters={...e.filters,...t}},SET_SORT(e,{sortBy:t,sortOrder:a}){t&&(e.sortBy=t),a&&(e.sortOrder=a)},RESET_FILTERS(e){e.filters={search:"",role:"",status:""},e.page=1},UPDATE_USER_IN_LIST(e,t){const a=e.users.findIndex(e=>e.id===t.id);-1!==a&&e.users.splice(a,1,{...e.users[a],...t})},REMOVE_USER_FROM_LIST(e,t){e.users=e.users.filter(e=>e.id!==t),e.total=Math.max(0,e.total-1)}},actions:{async fetchUsers({commit:e,state:t,rootState:a}){e("SET_LOADING",!0),e("SET_ERROR",null);try{const s=a.auth.token,r=await S.getUsers(s,{page:t.page,limit:t.limit,search:t.filters.search,role:t.filters.role,status:t.filters.status,sort_by:t.sortBy,sort_order:t.sortOrder});return r.success?(e("SET_USERS",r.users),e("SET_TOTAL",r.total),{success:!0}):(e("SET_ERROR",r.error),{success:!1,error:r.error})}catch(s){const t=s.response?.data?.error||s.message||"Failed to fetch users";return e("SET_ERROR",t),{success:!1,error:t}}finally{e("SET_LOADING",!1)}},async fetchUser({commit:e,rootState:t},a){e("SET_LOADING",!0),e("SET_ERROR",null);try{const s=t.auth.token,r=await S.getUser(s,a);return r.success?(e("SET_CURRENT_USER",r.user),{success:!0,user:r.user}):(e("SET_ERROR",r.error),{success:!1,error:r.error})}catch(s){const t=s.response?.data?.error||s.message||"Failed to fetch user";return e("SET_ERROR",t),{success:!1,error:t}}finally{e("SET_LOADING",!1)}},async createUser({commit:e,dispatch:t,rootState:a},s){e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=a.auth.token,o=await S.createUser(r,s);return o.success?(await t("fetchUsers"),{success:!0,user:o.user}):(e("SET_ERROR",o.error),{success:!1,error:o.error})}catch(r){const t=r.response?.data?.error||r.message||"Failed to create user";return e("SET_ERROR",t),{success:!1,error:t}}finally{e("SET_LOADING",!1)}},async updateUser({commit:e,rootState:t},{userId:a,userData:s}){e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=t.auth.token,o=await S.updateUser(r,a,s);return o.success?(e("UPDATE_USER_IN_LIST",{id:a,...s}),{success:!0}):(e("SET_ERROR",o.error),{success:!1,error:o.error})}catch(r){const t=r.response?.data?.error||r.message||"Failed to update user";return e("SET_ERROR",t),{success:!1,error:t}}finally{e("SET_LOADING",!1)}},async deleteUser({commit:e,rootState:t},a){e("SET_LOADING",!0),e("SET_ERROR",null);try{const s=t.auth.token,r=await S.deleteUser(s,a);return r.success?(e("REMOVE_USER_FROM_LIST",a),{success:!0}):(e("SET_ERROR",r.error),{success:!1,error:r.error})}catch(s){const t=s.response?.data?.error||s.message||"Failed to delete user";return e("SET_ERROR",t),{success:!1,error:t}}finally{e("SET_LOADING",!1)}},async resetPassword({commit:e,rootState:t},{userId:a,newPassword:s}){e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=t.auth.token,o=await S.resetPassword(r,a,s);return o.success?{success:!0,newPassword:o.new_password}:(e("SET_ERROR",o.error),{success:!1,error:o.error})}catch(r){const t=r.response?.data?.error||r.message||"Failed to reset password";return e("SET_ERROR",t),{success:!1,error:t}}finally{e("SET_LOADING",!1)}},async bulkImport({commit:e,dispatch:t,rootState:a},s){e("SET_LOADING",!0),e("SET_ERROR",null);try{const r=a.auth.token,o=await S.bulkImport(r,s);return o.success?(await t("fetchUsers"),{success:!0,created:o.created,failed:o.failed,errors:o.errors}):(e("SET_ERROR",o.error),{success:!1,error:o.error})}catch(r){const t=r.response?.data?.error||r.message||"Failed to import users";return e("SET_ERROR",t),{success:!1,error:t}}finally{e("SET_LOADING",!1)}},setPage({commit:e,dispatch:t},a){e("SET_PAGE",a),t("fetchUsers")},setFilters({commit:e,dispatch:t},a){e("SET_FILTERS",a),e("SET_PAGE",1),t("fetchUsers")},setSort({commit:e,dispatch:t},{sortBy:a,sortOrder:s}){e("SET_SORT",{sortBy:a,sortOrder:s}),t("fetchUsers")},resetFilters({commit:e,dispatch:t}){e("RESET_FILTERS"),t("fetchUsers")}},getters:{users:e=>e.users,currentUser:e=>e.currentUser,total:e=>e.total,page:e=>e.page,limit:e=>e.limit,pages:e=>Math.ceil(e.total/e.limit),isLoading:e=>e.loading,error:e=>e.error,filters:e=>e.filters,sortBy:e=>e.sortBy,sortOrder:e=>e.sortOrder}},A=(0,g.y$)({modules:{auth:k,users:L},state:{loading:!1,error:null},mutations:{SET_LOADING(e,t){e.loading=t},SET_ERROR(e,t){e.error=t},CLEAR_ERROR(e){e.error=null}},actions:{setLoading({commit:e},t){e("SET_LOADING",t)},setError({commit:e},t){e("SET_ERROR",t)},clearError({commit:e}){e("CLEAR_ERROR")}},getters:{isLoading:e=>e.loading,error:e=>e.error}}),R=a(1857),U=a(6560),T=a(8224),F=a(33);const C={class:"login-page"},O={class:"login-container"},P={class:"form-group"},I={class:"input-icon"},V={class:"form-group"},D={class:"input-icon"};function N(e,t,a,r,o,n){const i=(0,l.g2)("User"),u=T.WK,d=(0,l.g2)("Lock"),c=U.KR,p=R.S2;return(0,l.uX)(),(0,l.CE)("div",C,[(0,l.Lk)("div",O,[t[5]||(t[5]=(0,l.Lk)("div",{class:"login-header"},[(0,l.Lk)("h1",{class:"login-title"},"Admin Panel"),(0,l.Lk)("p",{class:"login-subtitle"},"Python Web IDE Administration")],-1)),(0,l.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)((...e)=>r.handleLogin&&r.handleLogin(...e),["prevent"])),class:"login-form"},[(0,l.Lk)("div",P,[t[3]||(t[3]=(0,l.Lk)("label",{class:"form-label"},"Username",-1)),(0,l.bF)(u,{modelValue:r.username,"onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),placeholder:"Enter your username",size:"large",disabled:r.loading,onKeyup:(0,s.jR)(r.handleLogin,["enter"])},{prefix:(0,l.k6)(()=>[(0,l.Lk)("span",I,[(0,l.bF)(i,{size:18})])]),_:1},8,["modelValue","disabled","onKeyup"])]),(0,l.Lk)("div",V,[t[4]||(t[4]=(0,l.Lk)("label",{class:"form-label"},"Password",-1)),(0,l.bF)(u,{modelValue:r.password,"onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),type:"password",placeholder:"Enter your password",size:"large","show-password":"",disabled:r.loading,onKeyup:(0,s.jR)(r.handleLogin,["enter"])},{prefix:(0,l.k6)(()=>[(0,l.Lk)("span",D,[(0,l.bF)(d,{size:18})])]),_:1},8,["modelValue","disabled","onKeyup"])]),r.error?((0,l.uX)(),(0,l.Wv)(c,{key:0,title:r.error,type:"error",closable:!1,"show-icon":"",class:"login-error"},null,8,["title"])):(0,l.Q3)("",!0),(0,l.bF)(p,{type:"primary",size:"large",loading:r.loading,onClick:r.handleLogin,class:"login-button"},{default:(0,l.k6)(()=>[(0,l.eW)((0,F.v_)(r.loading?"Signing in...":"Sign In"),1)]),_:1},8,["loading","onClick"])],32),t[6]||(t[6]=(0,l.Lk)("div",{class:"login-footer"},[(0,l.Lk)("p",null,"Only professors can access the admin panel.")],-1))])])}a(4114);var z=a(953),x=a(7731),W=a(2551),$={name:"AdminLogin",components:{User:x.A,Lock:W.A},setup(){const e=(0,g.Pj)(),t=(0,h.rd)(),a=(0,h.lq)(),s=(0,z.KR)(""),r=(0,z.KR)(""),o=(0,l.EW)(()=>e.getters["auth/isLoading"]),n=(0,l.EW)(()=>e.getters["auth/error"]),i=async()=>{if(!s.value||!r.value)return void window.ElMessage.warning("Please enter username and password");const o=await e.dispatch("auth/login",{username:s.value,password:r.value});if(o.success){window.ElMessage.success("Welcome to Admin Panel");const e=a.query.redirect||"/dashboard";t.push(e)}else window.ElMessage.error(o.error||"Login failed")};return{username:s,password:r,loading:o,error:n,handleLogin:i}}};const B=(0,c.A)($,[["render",N],["__scopeId","data-v-55e08b4a"]]);var j=B;const K={class:"dashboard"},G={class:"stats-grid"},M={class:"stat-card"},q={class:"stat-icon primary"},X={class:"stat-content"},Q={class:"stat-value"},H={class:"stat-card"},J={class:"stat-icon success"},Z={class:"stat-content"},Y={class:"stat-value"},ee={class:"stat-card"},te={class:"stat-icon info"},ae={class:"stat-content"},se={class:"stat-value"},re={class:"stat-card"},oe={class:"stat-icon warning"},ne={class:"stat-content"},le={class:"stat-value"},ie={class:"admin-card"},ue={class:"quick-actions"},de={class:"action-icon"},ce={class:"action-icon"},pe={class:"action-icon"},me={class:"action-icon"},he={class:"admin-card"},ge={class:"admin-card-header"},fe={key:0,class:"activity-list"},ve={class:"activity-icon"},be={class:"activity-content"},_e={class:"activity-text"},we={class:"activity-time"},ke={key:1,class:"empty-state"},Ee={class:"admin-card"},ye={class:"system-status"},Se={class:"status-item"},Le={class:"status-item"};function Ae(e,t,a,s,r,o){const n=(0,l.g2)("Users"),i=(0,l.g2)("GraduationCap"),u=(0,l.g2)("UserCog"),d=(0,l.g2)("Activity"),c=(0,l.g2)("UserPlus"),p=(0,l.g2)("router-link"),m=(0,l.g2)("Upload"),h=(0,l.g2)("FolderOpen"),g=(0,l.g2)("ClipboardCheck"),f=(0,l.g2)("AdminLayout");return(0,l.uX)(),(0,l.Wv)(f,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",K,[(0,l.Lk)("div",G,[(0,l.Lk)("div",M,[(0,l.Lk)("div",q,[(0,l.bF)(n,{size:28})]),(0,l.Lk)("div",X,[(0,l.Lk)("div",Q,(0,F.v_)(s.stats.totalUsers),1),t[1]||(t[1]=(0,l.Lk)("div",{class:"stat-label"},"Total Users",-1))])]),(0,l.Lk)("div",H,[(0,l.Lk)("div",J,[(0,l.bF)(i,{size:28})]),(0,l.Lk)("div",Z,[(0,l.Lk)("div",Y,(0,F.v_)(s.stats.students),1),t[2]||(t[2]=(0,l.Lk)("div",{class:"stat-label"},"Students",-1))])]),(0,l.Lk)("div",ee,[(0,l.Lk)("div",te,[(0,l.bF)(u,{size:28})]),(0,l.Lk)("div",ae,[(0,l.Lk)("div",se,(0,F.v_)(s.stats.professors),1),t[3]||(t[3]=(0,l.Lk)("div",{class:"stat-label"},"Professors",-1))])]),(0,l.Lk)("div",re,[(0,l.Lk)("div",oe,[(0,l.bF)(d,{size:28})]),(0,l.Lk)("div",ne,[(0,l.Lk)("div",le,(0,F.v_)(s.stats.activeSessions),1),t[4]||(t[4]=(0,l.Lk)("div",{class:"stat-label"},"Active Sessions",-1))])])]),(0,l.Lk)("div",ie,[t[9]||(t[9]=(0,l.Lk)("div",{class:"admin-card-header"},[(0,l.Lk)("h2",{class:"admin-card-title"},"Quick Actions")],-1)),(0,l.Lk)("div",ue,[(0,l.bF)(p,{to:"/users",class:"action-btn"},{default:(0,l.k6)(()=>[(0,l.Lk)("span",de,[(0,l.bF)(c,{size:32})]),t[5]||(t[5]=(0,l.Lk)("span",{class:"action-text"},"Create User",-1))]),_:1,__:[5]}),(0,l.Lk)("button",{class:"action-btn",onClick:t[0]||(t[0]=e=>s.showBulkImport=!0)},[(0,l.Lk)("span",ce,[(0,l.bF)(m,{size:32})]),t[6]||(t[6]=(0,l.Lk)("span",{class:"action-text"},"Bulk Import",-1))]),(0,l.bF)(p,{to:"/files",class:"action-btn"},{default:(0,l.k6)(()=>[(0,l.Lk)("span",pe,[(0,l.bF)(h,{size:32})]),t[7]||(t[7]=(0,l.Lk)("span",{class:"action-text"},"Browse Files",-1))]),_:1,__:[7]}),(0,l.bF)(p,{to:"/grading",class:"action-btn"},{default:(0,l.k6)(()=>[(0,l.Lk)("span",me,[(0,l.bF)(g,{size:32})]),t[8]||(t[8]=(0,l.Lk)("span",{class:"action-text"},"Grade Submissions",-1))]),_:1,__:[8]})])]),(0,l.Lk)("div",he,[(0,l.Lk)("div",ge,[t[11]||(t[11]=(0,l.Lk)("h2",{class:"admin-card-title"},"Recent Activity",-1)),(0,l.bF)(p,{to:"/audit",class:"view-all-link"},{default:(0,l.k6)(()=>t[10]||(t[10]=[(0,l.eW)("View All →",-1)])),_:1,__:[10]})]),s.recentActivity.length>0?((0,l.uX)(),(0,l.CE)("div",fe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.recentActivity,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"activity-item"},[(0,l.Lk)("span",ve,[((0,l.uX)(),(0,l.Wv)((0,l.$y)(s.getActivityIcon(e.action_type)),{size:20}))]),(0,l.Lk)("div",be,[(0,l.Lk)("span",_e,[(0,l.Lk)("strong",null,(0,F.v_)(e.admin_username),1),(0,l.eW)(" "+(0,F.v_)(s.formatActivityText(e)),1)]),(0,l.Lk)("span",we,(0,F.v_)(s.formatTime(e.created_at)),1)])]))),128))])):((0,l.uX)(),(0,l.CE)("div",ke,t[12]||(t[12]=[(0,l.Lk)("p",null,"No recent activity",-1)])))]),(0,l.Lk)("div",Ee,[t[17]||(t[17]=(0,l.Lk)("div",{class:"admin-card-header"},[(0,l.Lk)("h2",{class:"admin-card-title"},"System Status")],-1)),(0,l.Lk)("div",ye,[t[15]||(t[15]=(0,l.Lk)("div",{class:"status-item"},[(0,l.Lk)("span",{class:"status-label"},"Database"),(0,l.Lk)("span",{class:"status-value success"},"● Connected")],-1)),t[16]||(t[16]=(0,l.Lk)("div",{class:"status-item"},[(0,l.Lk)("span",{class:"status-label"},"File Storage"),(0,l.Lk)("span",{class:"status-value success"},"● Online")],-1)),(0,l.Lk)("div",Se,[t[13]||(t[13]=(0,l.Lk)("span",{class:"status-label"},"Memory Usage",-1)),(0,l.Lk)("span",{class:(0,F.C4)(["status-value",s.memoryStatusClass])},(0,F.v_)(s.stats.memoryPercent)+"% ",3)]),(0,l.Lk)("div",Le,[t[14]||(t[14]=(0,l.Lk)("span",{class:"status-label"},"CPU Usage",-1)),(0,l.Lk)("span",{class:(0,F.C4)(["status-value",s.cpuStatusClass])},(0,F.v_)(s.stats.cpuPercent)+"% ",3)])])])])]),_:1})}var Re=a(7424),Ue=a(6774),Te=a(5997),Fe=a(8065),Ce=a(1905),Oe=a(7396),Pe=a(5365),Ie=a(4829),Ve=a(7417),De=a(2404),Ne=a(5626),ze=a(461),xe=a(1769),We=a(1783),$e=a(5239),Be=a(3528),je=a(9992),Ke=a(605),Ge={name:"AdminDashboard",components:{AdminLayout:Re.A,Users:Ue.A,GraduationCap:Te.A,UserCog:Fe.A,Activity:Ce.A,UserPlus:Oe.A,Upload:Pe.A,FolderOpen:Ie.A,ClipboardCheck:Ve.A,KeyRound:De.A,LogIn:Ne.A,LogOut:ze.A,Pencil:xe.A,Trash2:We.A,Eye:$e.A,Download:Be.A,FileText:je.A,ClipboardList:Ke.A},setup(){(0,g.Pj)();const e=(0,z.KR)(!1),t=(0,z.KR)({totalUsers:0,students:0,professors:0,activeSessions:0,memoryPercent:0,cpuPercent:0}),a=(0,z.KR)([]),s=(0,l.EW)(()=>t.value.memoryPercent>80?"danger":t.value.memoryPercent>60?"warning":"success"),r=(0,l.EW)(()=>t.value.cpuPercent>80?"danger":t.value.cpuPercent>60?"warning":"success"),o=e=>{const t={admin_login:Ne.A,admin_logout:ze.A,create_user:Oe.A,update_user:xe.A,delete_user:We.A,reset_password:De.A,bulk_import_users:Pe.A,view_file:$e.A,download_file:Be.A,edit_file:xe.A,delete_file:We.A,grade_submission:Ve.A};return t[e]||Ke.A},n=e=>{const t={admin_login:"logged in",admin_logout:"logged out",create_user:`created user ${e.target_username||""}`,update_user:`updated user ${e.target_username||""}`,delete_user:`deleted user ${e.target_username||""}`,reset_password:`reset password for ${e.target_username||""}`,bulk_import_users:"imported users from CSV",view_file:`viewed ${e.target_path||"a file"}`,download_file:`downloaded ${e.target_path||"a file"}`,edit_file:`edited ${e.target_path||"a file"}`,delete_file:`deleted ${e.target_path||"a file"}`,grade_submission:"graded a submission"};return t[e.action_type]||e.action_type},i=e=>{if(!e)return"";const t=new Date(e),a=new Date,s=a-t;return s<6e4?"just now":s<36e5?`${Math.floor(s/6e4)}m ago`:s<864e5?`${Math.floor(s/36e5)}h ago`:t.toLocaleDateString()},u=async()=>{t.value={totalUsers:65,students:60,professors:5,activeSessions:12,memoryPercent:45,cpuPercent:23},a.value=[{id:1,admin_username:"sa9082",action_type:"reset_password",target_username:"jd1234",created_at:new Date(Date.now()-3e5).toISOString()},{id:2,admin_username:"sl7927",action_type:"create_user",target_username:"newstudent",created_at:new Date(Date.now()-36e5).toISOString()}]};return(0,l.sV)(()=>{u()}),{stats:t,recentActivity:a,showBulkImport:e,memoryStatusClass:s,cpuStatusClass:r,getActivityIcon:o,formatActivityText:n,formatTime:i}}};const Me=(0,c.A)(Ge,[["render",Ae],["__scopeId","data-v-6087adce"]]);var qe=Me,Xe=a(3693),Qe=a(3022),He=a(8135),Je=a(945),Ze=a(3671),Ye=a(6091),et=a(6735),tt=a(8062);const at={class:"users-page"},st={class:"toolbar"},rt={class:"toolbar-left"},ot={class:"search-box"},nt={class:"search-icon"},lt={class:"toolbar-right"},it={class:"admin-card"},ut={class:"pagination-wrapper"},dt={style:{"font-size":"18px","font-weight":"bold",margin:"10px 0"}},ct={key:0,class:"selected-file"};function pt(e,t,a,r,o,n){const i=(0,l.g2)("Search"),u=tt.P9,d=tt.AV,c=(0,l.g2)("Download"),p=R.S2,m=(0,l.g2)("Upload"),h=(0,l.g2)("FileSpreadsheet"),g=(0,l.g2)("UserPlus"),f=et.o8,v=(0,l.g2)("Pencil"),b=(0,l.g2)("KeyRound"),_=(0,l.g2)("Trash2"),w=R.fg,k=et.Up,E=Ye.aQ,y=T.WK,S=Ze.xE,L=Ze.US,A=Je.kZ,C=He.qi,O=U.KR,P=(0,l.g2)("Copy"),I=Qe.j5,V=(0,l.g2)("AdminLayout"),D=Xe.A;return(0,l.uX)(),(0,l.Wv)(V,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",at,[(0,l.Lk)("div",st,[(0,l.Lk)("div",rt,[(0,l.Lk)("div",ot,[(0,l.Lk)("span",nt,[(0,l.bF)(i,{size:18})]),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),type:"text",placeholder:"Search users...",onInput:t[1]||(t[1]=(...e)=>r.handleSearch&&r.handleSearch(...e))},null,544),[[s.Jo,r.searchQuery]])]),(0,l.bF)(d,{modelValue:r.roleFilter,"onUpdate:modelValue":t[2]||(t[2]=e=>r.roleFilter=e),placeholder:"All Roles",onChange:r.handleFilterChange},{default:(0,l.k6)(()=>[(0,l.bF)(u,{label:"All Roles",value:""}),(0,l.bF)(u,{label:"Students",value:"student"}),(0,l.bF)(u,{label:"Professors",value:"professor"})]),_:1},8,["modelValue","onChange"]),(0,l.bF)(d,{modelValue:r.statusFilter,"onUpdate:modelValue":t[3]||(t[3]=e=>r.statusFilter=e),placeholder:"All Status",onChange:r.handleFilterChange},{default:(0,l.k6)(()=>[(0,l.bF)(u,{label:"All Status",value:""}),(0,l.bF)(u,{label:"Active",value:"active"}),(0,l.bF)(u,{label:"Inactive",value:"inactive"})]),_:1},8,["modelValue","onChange"])]),(0,l.Lk)("div",lt,[(0,l.bF)(p,{onClick:r.downloadTemplate},{default:(0,l.k6)(()=>[(0,l.bF)(c,{size:16}),t[28]||(t[28]=(0,l.eW)(" Template",-1))]),_:1,__:[28]},8,["onClick"]),(0,l.bF)(p,{onClick:t[4]||(t[4]=e=>r.showBulkImport=!0)},{default:(0,l.k6)(()=>[(0,l.bF)(m,{size:16}),t[29]||(t[29]=(0,l.eW)(" Bulk Import",-1))]),_:1,__:[29]}),(0,l.bF)(p,{onClick:r.exportUsers},{default:(0,l.k6)(()=>[(0,l.bF)(h,{size:16}),t[30]||(t[30]=(0,l.eW)(" Export",-1))]),_:1,__:[30]},8,["onClick"]),(0,l.bF)(p,{type:"primary",onClick:t[5]||(t[5]=e=>r.showCreateUser=!0)},{default:(0,l.k6)(()=>[(0,l.bF)(g,{size:16}),t[31]||(t[31]=(0,l.eW)(" Create User",-1))]),_:1,__:[31]})])]),(0,l.Lk)("div",it,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(k,{data:r.users,stripe:"",style:{width:"100%"},onSortChange:r.handleSortChange},{default:(0,l.k6)(()=>[(0,l.bF)(f,{prop:"username",label:"Username",sortable:"custom",width:"150"}),(0,l.bF)(f,{prop:"full_name",label:"Name",sortable:"custom","min-width":"150"}),(0,l.bF)(f,{prop:"email",label:"Email","min-width":"200"}),(0,l.bF)(f,{prop:"role",label:"Role",sortable:"custom",width:"120"},{default:(0,l.k6)(e=>[(0,l.Lk)("span",{class:(0,F.C4)(["badge","professor"===e.row.role?"badge-info":"badge-success"])},(0,F.v_)(e.row.role),3)]),_:1}),(0,l.bF)(f,{prop:"is_active",label:"Status",width:"100"},{default:(0,l.k6)(e=>[(0,l.Lk)("span",{class:(0,F.C4)(["badge",e.row.is_active?"badge-success":"badge-danger"])},(0,F.v_)(e.row.is_active?"Active":"Inactive"),3)]),_:1}),(0,l.bF)(f,{prop:"last_login",label:"Last Login",sortable:"custom",width:"150"},{default:(0,l.k6)(e=>[(0,l.eW)((0,F.v_)(r.formatDate(e.row.last_login)),1)]),_:1}),(0,l.bF)(f,{label:"Actions",width:"180",fixed:"right"},{default:(0,l.k6)(e=>[(0,l.bF)(w,null,{default:(0,l.k6)(()=>[(0,l.bF)(p,{size:"small",onClick:t=>r.editUser(e.row)},{default:(0,l.k6)(()=>[(0,l.bF)(v,{size:14})]),_:2},1032,["onClick"]),(0,l.bF)(p,{size:"small",onClick:t=>r.resetPasswordDialog(e.row)},{default:(0,l.k6)(()=>[(0,l.bF)(b,{size:14})]),_:2},1032,["onClick"]),(0,l.bF)(p,{size:"small",type:"danger",onClick:t=>r.confirmDeleteUser(e.row)},{default:(0,l.k6)(()=>[(0,l.bF)(_,{size:14})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])),[[D,r.loading]]),(0,l.Lk)("div",ut,[(0,l.bF)(E,{"current-page":r.currentPage,"onUpdate:currentPage":t[6]||(t[6]=e=>r.currentPage=e),"page-size":r.pageSize,"onUpdate:pageSize":t[7]||(t[7]=e=>r.pageSize=e),"page-sizes":[10,20,50,100],total:r.total,layout:"total, sizes, prev, pager, next",onSizeChange:r.handleSizeChange,onCurrentChange:r.handlePageChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),(0,l.bF)(A,{modelValue:r.showCreateUser,"onUpdate:modelValue":t[14]||(t[14]=e=>r.showCreateUser=e),title:"Create New User",width:"500px"},{footer:(0,l.k6)(()=>[(0,l.bF)(p,{onClick:t[13]||(t[13]=e=>r.showCreateUser=!1)},{default:(0,l.k6)(()=>t[32]||(t[32]=[(0,l.eW)("Cancel",-1)])),_:1,__:[32]}),(0,l.bF)(p,{type:"primary",onClick:r.createUser,loading:r.creating},{default:(0,l.k6)(()=>t[33]||(t[33]=[(0,l.eW)("Create",-1)])),_:1,__:[33]},8,["onClick","loading"])]),default:(0,l.k6)(()=>[(0,l.bF)(L,{model:r.newUser,"label-position":"top"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{label:"Username",required:""},{default:(0,l.k6)(()=>[(0,l.bF)(y,{modelValue:r.newUser.username,"onUpdate:modelValue":t[8]||(t[8]=e=>r.newUser.username=e),placeholder:"Enter username"},null,8,["modelValue"])]),_:1}),(0,l.bF)(S,{label:"Password",required:""},{default:(0,l.k6)(()=>[(0,l.bF)(y,{modelValue:r.newUser.password,"onUpdate:modelValue":t[9]||(t[9]=e=>r.newUser.password=e),type:"password",placeholder:"Enter password","show-password":""},null,8,["modelValue"])]),_:1}),(0,l.bF)(S,{label:"Full Name"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{modelValue:r.newUser.full_name,"onUpdate:modelValue":t[10]||(t[10]=e=>r.newUser.full_name=e),placeholder:"Enter full name"},null,8,["modelValue"])]),_:1}),(0,l.bF)(S,{label:"Email"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{modelValue:r.newUser.email,"onUpdate:modelValue":t[11]||(t[11]=e=>r.newUser.email=e),placeholder:"Enter email"},null,8,["modelValue"])]),_:1}),(0,l.bF)(S,{label:"Role"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:r.newUser.role,"onUpdate:modelValue":t[12]||(t[12]=e=>r.newUser.role=e),style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(u,{label:"Student",value:"student"}),(0,l.bF)(u,{label:"Professor",value:"professor"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),(0,l.bF)(A,{modelValue:r.showEditUser,"onUpdate:modelValue":t[20]||(t[20]=e=>r.showEditUser=e),title:"Edit User",width:"500px"},{footer:(0,l.k6)(()=>[(0,l.bF)(p,{onClick:t[19]||(t[19]=e=>r.showEditUser=!1)},{default:(0,l.k6)(()=>t[34]||(t[34]=[(0,l.eW)("Cancel",-1)])),_:1,__:[34]}),(0,l.bF)(p,{type:"primary",onClick:r.updateUser,loading:r.updating},{default:(0,l.k6)(()=>t[35]||(t[35]=[(0,l.eW)("Save Changes",-1)])),_:1,__:[35]},8,["onClick","loading"])]),default:(0,l.k6)(()=>[r.editingUser?((0,l.uX)(),(0,l.Wv)(L,{key:0,model:r.editingUser,"label-position":"top"},{default:(0,l.k6)(()=>[(0,l.bF)(S,{label:"Username"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{value:r.editingUser.username,disabled:""},null,8,["value"])]),_:1}),(0,l.bF)(S,{label:"Full Name"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{modelValue:r.editingUser.full_name,"onUpdate:modelValue":t[15]||(t[15]=e=>r.editingUser.full_name=e),placeholder:"Enter full name"},null,8,["modelValue"])]),_:1}),(0,l.bF)(S,{label:"Email"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{modelValue:r.editingUser.email,"onUpdate:modelValue":t[16]||(t[16]=e=>r.editingUser.email=e),placeholder:"Enter email"},null,8,["modelValue"])]),_:1}),(0,l.bF)(S,{label:"Role"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{modelValue:r.editingUser.role,"onUpdate:modelValue":t[17]||(t[17]=e=>r.editingUser.role=e),style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(u,{label:"Student",value:"student"}),(0,l.bF)(u,{label:"Professor",value:"professor"})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(S,{label:"Status"},{default:(0,l.k6)(()=>[(0,l.bF)(C,{modelValue:r.editingUser.is_active,"onUpdate:modelValue":t[18]||(t[18]=e=>r.editingUser.is_active=e),"active-text":"Active","inactive-text":"Inactive"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])):(0,l.Q3)("",!0)]),_:1},8,["modelValue"]),(0,l.bF)(A,{modelValue:r.showResetPassword,"onUpdate:modelValue":t[23]||(t[23]=e=>r.showResetPassword=e),title:"Reset Password",width:"400px"},{footer:(0,l.k6)(()=>[(0,l.bF)(p,{onClick:t[22]||(t[22]=e=>r.showResetPassword=!1)},{default:(0,l.k6)(()=>t[38]||(t[38]=[(0,l.eW)("Cancel",-1)])),_:1,__:[38]}),(0,l.bF)(p,{type:"primary",onClick:r.resetPassword,loading:r.resetting},{default:(0,l.k6)(()=>t[39]||(t[39]=[(0,l.eW)("Reset Password",-1)])),_:1,__:[39]},8,["onClick","loading"])]),default:(0,l.k6)(()=>[(0,l.Lk)("p",null,[t[36]||(t[36]=(0,l.eW)("Reset password for ",-1)),(0,l.Lk)("strong",null,(0,F.v_)(r.resetPasswordUser?.username),1),t[37]||(t[37]=(0,l.eW)("?",-1))]),(0,l.bF)(S,{label:"New Password (leave blank for random)"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{modelValue:r.newPassword,"onUpdate:modelValue":t[21]||(t[21]=e=>r.newPassword=e),type:"password",placeholder:"Leave blank for random password","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),(0,l.bF)(A,{modelValue:r.showPasswordResult,"onUpdate:modelValue":t[25]||(t[25]=e=>r.showPasswordResult=e),title:"Password Reset Complete",width:"400px"},{footer:(0,l.k6)(()=>[(0,l.bF)(p,{onClick:r.copyPassword},{default:(0,l.k6)(()=>[(0,l.bF)(P,{size:14}),t[41]||(t[41]=(0,l.eW)(" Copy",-1))]),_:1,__:[41]},8,["onClick"]),(0,l.bF)(p,{type:"primary",onClick:t[24]||(t[24]=e=>r.showPasswordResult=!1)},{default:(0,l.k6)(()=>t[42]||(t[42]=[(0,l.eW)("Done",-1)])),_:1,__:[42]})]),default:(0,l.k6)(()=>[(0,l.bF)(O,{title:"New Password",type:"success",closable:!1,"show-icon":""},{default:(0,l.k6)(()=>[(0,l.Lk)("p",dt,(0,F.v_)(r.generatedPassword),1),t[40]||(t[40]=(0,l.Lk)("p",{style:{color:"#999"}},"Please share this password with the user securely.",-1))]),_:1,__:[40]})]),_:1},8,["modelValue"]),(0,l.bF)(A,{modelValue:r.showBulkImport,"onUpdate:modelValue":t[27]||(t[27]=e=>r.showBulkImport=e),title:"Bulk Import Users",width:"500px"},{footer:(0,l.k6)(()=>[(0,l.bF)(p,{onClick:t[26]||(t[26]=e=>r.showBulkImport=!1)},{default:(0,l.k6)(()=>t[44]||(t[44]=[(0,l.eW)("Cancel",-1)])),_:1,__:[44]}),(0,l.bF)(p,{type:"primary",onClick:r.bulkImport,loading:r.importing,disabled:!r.importFile},{default:(0,l.k6)(()=>t[45]||(t[45]=[(0,l.eW)(" Import Users ",-1)])),_:1,__:[45]},8,["onClick","loading","disabled"])]),default:(0,l.k6)(()=>[t[46]||(t[46]=(0,l.Lk)("div",{class:"import-info"},[(0,l.Lk)("p",null,"Upload a CSV file with the following columns:"),(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,[(0,l.Lk)("strong",null,"username"),(0,l.eW)(" (required)")]),(0,l.Lk)("li",null,[(0,l.Lk)("strong",null,"password"),(0,l.eW)(" (required)")]),(0,l.Lk)("li",null,"full_name (optional)"),(0,l.Lk)("li",null,"email (optional)"),(0,l.Lk)("li",null,'role (optional, defaults to "student")')])],-1)),(0,l.bF)(I,{ref:"uploadRef","auto-upload":!1,limit:1,accept:".csv","on-change":r.handleFileChange},{trigger:(0,l.k6)(()=>[(0,l.bF)(p,null,{default:(0,l.k6)(()=>t[43]||(t[43]=[(0,l.eW)("Select CSV File",-1)])),_:1,__:[43]})]),_:1},8,["on-change"]),r.importFile?((0,l.uX)(),(0,l.CE)("div",ct," Selected: "+(0,F.v_)(r.importFile.name),1)):(0,l.Q3)("",!0)]),_:1,__:[46]},8,["modelValue"])])]),_:1})}var mt=a(1028),ht=a(617),gt=a(513),ft=a(6763),vt={name:"UsersPage",components:{AdminLayout:Re.A,Search:mt.A,Download:Be.A,Upload:Pe.A,FileSpreadsheet:ht.A,UserPlus:Oe.A,Pencil:xe.A,KeyRound:De.A,Trash2:We.A,Copy:gt.A},setup(){const e=(0,g.Pj)(),t=(0,z.KR)(""),a=(0,z.KR)(""),s=(0,z.KR)(""),r=(0,z.KR)(1),o=(0,z.KR)(20),n=((0,z.KR)("username"),(0,z.KR)("asc"),(0,z.KR)(!1)),i=(0,z.KR)(!1),u=(0,z.KR)(!1),d=(0,z.KR)(!1),c=(0,z.KR)(!1),p=(0,z.KR)({username:"",password:"",full_name:"",email:"",role:"student"}),m=(0,z.KR)(null),h=(0,z.KR)(null),f=(0,z.KR)(""),v=(0,z.KR)(""),b=(0,z.KR)(null),_=(0,z.KR)(!1),w=(0,z.KR)(!1),k=(0,z.KR)(!1),E=(0,z.KR)(!1),y=(0,l.EW)(()=>e.getters["users/users"]),L=(0,l.EW)(()=>e.getters["users/total"]),A=(0,l.EW)(()=>e.getters["users/isLoading"]),R=(0,l.EW)(()=>e.getters["auth/token"]),U=()=>{e.dispatch("users/fetchUsers")},T=()=>{e.dispatch("users/setFilters",{search:t.value})},F=()=>{e.dispatch("users/setFilters",{role:a.value,status:s.value})},C=({prop:t,order:a})=>{t&&a&&e.dispatch("users/setSort",{sortBy:t,sortOrder:"ascending"===a?"asc":"desc"})},O=t=>{e.dispatch("users/setPage",t)},P=t=>{e.commit("users/SET_LIMIT",t),e.commit("users/SET_PAGE",1),U()},I=e=>{if(!e)return"Never";const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},V=async()=>{if(!p.value.username||!p.value.password)return void window.ElMessage.warning("Username and password are required");_.value=!0;const t=await e.dispatch("users/createUser",p.value);_.value=!1,t.success?(window.ElMessage.success("User created successfully"),n.value=!1,p.value={username:"",password:"",full_name:"",email:"",role:"student"}):window.ElMessage.error(t.error||"Failed to create user")},D=e=>{m.value={...e},i.value=!0},N=async()=>{if(!m.value)return;w.value=!0;const t=await e.dispatch("users/updateUser",{userId:m.value.id,userData:{full_name:m.value.full_name,email:m.value.email,role:m.value.role,is_active:m.value.is_active}});w.value=!1,t.success?(window.ElMessage.success("User updated successfully"),i.value=!1,U()):window.ElMessage.error(t.error||"Failed to update user")},x=e=>{h.value=e,f.value="",u.value=!0},W=async()=>{if(!h.value)return;k.value=!0;const t=await e.dispatch("users/resetPassword",{userId:h.value.id,newPassword:f.value||null});k.value=!1,t.success?(v.value=t.newPassword,u.value=!1,d.value=!0):window.ElMessage.error(t.error||"Failed to reset password")},$=()=>{navigator.clipboard.writeText(v.value),window.ElMessage.success("Password copied to clipboard")},B=t=>{window.ElMessageBox.confirm(`Are you sure you want to delete user "${t.username}"? This action cannot be undone.`,"Confirm Delete",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{const a=await e.dispatch("users/deleteUser",t.id);a.success?window.ElMessage.success("User deleted successfully"):window.ElMessage.error(a.error||"Failed to delete user")}).catch(()=>{})},j=e=>{b.value=e.raw},K=async()=>{if(!b.value)return;E.value=!0;const t=await e.dispatch("users/bulkImport",b.value);E.value=!1,t.success?(window.ElMessage.success(`Imported ${t.created} users. ${t.failed} failed.`),c.value=!1,b.value=null,t.errors?.length>0&&ft.warn("Import errors:",t.errors)):window.ElMessage.error(t.error||"Import failed")},G=async()=>{try{const e=await S.downloadTemplate(R.value),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="user_import_template.csv",a.click(),window.URL.revokeObjectURL(t)}catch(e){window.ElMessage.error("Failed to download template")}},M=async()=>{try{const e=await S.exportUsers(R.value,{search:t.value,role:a.value,status:s.value}),r=window.URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download=`users_export_${(new Date).toISOString().split("T")[0]}.csv`,o.click(),window.URL.revokeObjectURL(r)}catch(e){window.ElMessage.error("Failed to export users")}};return(0,l.sV)(()=>{U()}),(0,l.wB)(r,e=>{O(e)}),{searchQuery:t,roleFilter:a,statusFilter:s,currentPage:r,pageSize:o,users:y,total:L,loading:A,showCreateUser:n,showEditUser:i,showResetPassword:u,showPasswordResult:d,showBulkImport:c,newUser:p,editingUser:m,resetPasswordUser:h,newPassword:f,generatedPassword:v,importFile:b,creating:_,updating:w,resetting:k,importing:E,handleSearch:T,handleFilterChange:F,handleSortChange:C,handlePageChange:O,handleSizeChange:P,formatDate:I,createUser:V,editUser:D,updateUser:N,resetPasswordDialog:x,resetPassword:W,copyPassword:$,confirmDeleteUser:B,handleFileChange:j,bulkImport:K,downloadTemplate:G,exportUsers:M}}};const bt=(0,c.A)(vt,[["render",pt],["__scopeId","data-v-156869a3"]]);var _t=bt;const wt=[{path:"/login",name:"Login",component:j,meta:{requiresAuth:!1}},{path:"/",redirect:"/dashboard"},{path:"/dashboard",name:"Dashboard",component:qe,meta:{requiresAuth:!0}},{path:"/users",name:"Users",component:_t,meta:{requiresAuth:!0}},{path:"/users/:id",name:"UserDetail",component:()=>a.e(404).then(a.bind(a,6404)),meta:{requiresAuth:!0}},{path:"/files",name:"FileBrowser",component:()=>a.e(408).then(a.bind(a,3408)),meta:{requiresAuth:!0}},{path:"/grading",name:"Grading",component:()=>a.e(541).then(a.bind(a,4541)),meta:{requiresAuth:!0}},{path:"/analytics",name:"Analytics",component:()=>a.e(953).then(a.bind(a,3334)),meta:{requiresAuth:!0}},{path:"/audit",name:"AuditLog",component:()=>a.e(400).then(a.bind(a,400)),meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:()=>a.e(768).then(a.bind(a,9768)),meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",redirect:"/dashboard"}],kt=(0,h.aE)({history:(0,h.LA)("/"),routes:wt});kt.beforeEach(async(e,t,a)=>{const s=!1!==e.meta.requiresAuth;if(s){const t=await A.dispatch("auth/checkSession");if(!t)return void a({name:"Login",query:{redirect:e.fullPath}})}if("Login"===e.name){const e=await A.dispatch("auth/checkSession");if(e)return void a({name:"Dashboard"})}a()});var Et=kt;const yt=(0,s.Ef)(m);yt.use(Et),yt.use(A),yt.use(r.A),window.ElMessage=o.nk,window.ElMessageBox=n.s,yt.mount("#app")},7424:function(e,t,a){a.d(t,{A:function(){return $}});var s=a(641),r=a(33);const o={class:"admin-layout"},n={class:"admin-header"},l={class:"page-title"},i={class:"header-actions"},u={class:"welcome-text"},d={class:"admin-content"};function c(e,t,a,c,p,m){const h=(0,s.g2)("Sidebar");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(h,{collapsed:c.sidebarCollapsed},null,8,["collapsed"]),(0,s.Lk)("main",{class:(0,r.C4)(["admin-main",{"sidebar-collapsed":c.sidebarCollapsed}])},[(0,s.Lk)("header",n,[(0,s.Lk)("button",{class:"toggle-sidebar",onClick:t[0]||(t[0]=(...e)=>c.toggleSidebar&&c.toggleSidebar(...e))},(0,r.v_)(c.sidebarCollapsed?"☰":"◀"),1),(0,s.Lk)("h1",l,(0,r.v_)(c.pageTitle),1),(0,s.Lk)("div",i,[(0,s.Lk)("span",u,"Welcome, "+(0,r.v_)(c.fullName),1)])]),(0,s.Lk)("div",d,[(0,s.RG)(e.$slots,"default",{},void 0,!0)])],2)])}var p=a(953),m=a(6278),h=a(5220);const g={class:"sidebar-logo"},f={key:0,class:"logo-text"},v={class:"sidebar-nav"},b={key:0,class:"nav-text"},_={class:"sidebar-footer"},w={key:0,class:"user-info"},k={class:"user-name"},E={class:"user-role"},y=["title"],S={key:0,class:"nav-text"};function L(e,t,a,o,n,l){const i=(0,s.g2)("Shield"),u=(0,s.g2)("router-link"),d=(0,s.g2)("LogOut");return(0,s.uX)(),(0,s.CE)("aside",{class:(0,r.C4)(["admin-sidebar",{collapsed:a.collapsed}])},[(0,s.Lk)("div",g,[(0,s.bF)(i,{class:"logo-icon",size:24}),a.collapsed?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",f,"Admin Panel"))]),(0,s.Lk)("nav",v,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.navItems,e=>((0,s.uX)(),(0,s.Wv)(u,{key:e.path,to:e.path,class:(0,r.C4)(["nav-item",{active:o.isActive(e.path)}])},{default:(0,s.k6)(()=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)(e.icon),{class:"nav-icon",size:20})),a.collapsed?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",b,(0,r.v_)(e.label),1))]),_:2},1032,["to","class"]))),128))]),(0,s.Lk)("div",_,[a.collapsed?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",k,(0,r.v_)(o.fullName),1),(0,s.Lk)("div",E,(0,r.v_)(o.role),1)])),(0,s.Lk)("button",{class:"logout-btn",onClick:t[0]||(t[0]=(...e)=>o.handleLogout&&o.handleLogout(...e)),title:a.collapsed?"Logout":""},[(0,s.bF)(d,{class:"nav-icon",size:20}),a.collapsed?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("span",S,"Logout"))],8,y)])],2)}a(4114);var A=a(4563),R=a(6774),U=a(4829),T=a(7417),F=a(5297),C=a(9992),O=a(9037),P=a(461),I=a(4449),V={name:"AdminSidebar",components:{LayoutDashboard:A.A,Users:R.A,FolderOpen:U.A,ClipboardCheck:T.A,BarChart3:F.A,FileText:C.A,Settings:O.A,LogOut:P.A,Shield:I.A},props:{collapsed:{type:Boolean,default:!1}},setup(){const e=(0,m.Pj)(),t=(0,h.rd)(),a=(0,h.lq)(),r=[{path:"/dashboard",label:"Dashboard",icon:"LayoutDashboard"},{path:"/users",label:"Users",icon:"Users"},{path:"/files",label:"File Browser",icon:"FolderOpen"},{path:"/grading",label:"Grading",icon:"ClipboardCheck"},{path:"/analytics",label:"Analytics",icon:"BarChart3"},{path:"/audit",label:"Audit Log",icon:"FileText"},{path:"/settings",label:"Settings",icon:"Settings"}],o=(0,s.EW)(()=>e.getters["auth/fullName"]),n=(0,s.EW)(()=>e.getters["auth/user"]?.role||"professor"),l=e=>a.path===e||a.path.startsWith(e+"/"),i=async()=>{await e.dispatch("auth/logout"),t.push("/login")};return{navItems:r,fullName:o,role:n,isActive:l,handleLogout:i}}},D=a(6262);const N=(0,D.A)(V,[["render",L],["__scopeId","data-v-1b06d4f8"]]);var z=N,x={name:"AdminLayout",components:{Sidebar:z},setup(){const e=(0,m.Pj)(),t=(0,h.lq)(),a=(0,p.KR)(!1),r=(0,s.EW)(()=>e.getters["auth/fullName"]),o={"/dashboard":"Dashboard","/users":"User Management","/files":"File Browser","/grading":"Grading","/analytics":"Analytics","/audit":"Audit Log","/settings":"Settings"},n=(0,s.EW)(()=>{const e=t.path;return o[e]||"Admin Panel"}),l=()=>{a.value=!a.value};return{sidebarCollapsed:a,fullName:r,pageTitle:n,toggleSidebar:l}}};const W=(0,D.A)(x,[["render",c],["__scopeId","data-v-41cc9b25"]]);var $=W}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,o){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],o=e[d][2];for(var l=!0,i=0;i<s.length;i++)(!1&o||n>=o)&&Object.keys(a.O).every(function(e){return a.O[e](s[i])})?s.splice(i--,1):(l=!1,o<n&&(n=o));if(l){e.splice(d--,1);var u=r();void 0!==u&&(t=u)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,r,o]}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce(function(t,s){return a.f[s](e,t),t},[]))}}(),function(){a.u=function(e){return"static/js/"+e+"."+{400:"62cbf8d1",404:"3a7d4f0e",408:"3f8d925e",541:"ecb0fa6e",768:"0fe5bb7b",953:"ad598ece"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"static/css/"+e+"."+{400:"9fb7b61e",404:"7b84b1b7",408:"496ddb71",541:"db3e8857",768:"6c9ce803",953:"f894a2d4"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vm.web.ide:";a.l=function(s,r,o,n){if(e[s])e[s].push(r);else{var l,i;if(void 0!==o)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==s||c.getAttribute("data-webpack")==t+o){l=c;break}}l||(i=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",t+o),l.src=s),e[s]=[r];var p=function(t,a){l.onerror=l.onload=null,clearTimeout(m);var r=e[s];if(delete e[s],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach(function(e){return e(a)}),t)return t(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),i&&document.head.appendChild(l)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,s,r,o){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",a.nc&&(n.nonce=a.nc);var l=function(a){if(n.onerror=n.onload=null,"load"===a.type)r();else{var s=a&&a.type,l=a&&a.target&&a.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+s+": "+l+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=s,i.request=l,n.parentNode&&n.parentNode.removeChild(n),o(i)}};return n.onerror=n.onload=l,n.href=t,s?s.parentNode.insertBefore(n,s.nextSibling):document.head.appendChild(n),n},t=function(e,t){for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var r=a[s],o=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(o===e||o===t))return r}var n=document.getElementsByTagName("style");for(s=0;s<n.length;s++){r=n[s],o=r.getAttribute("data-href");if(o===e||o===t)return r}},s=function(s){return new Promise(function(r,o){var n=a.miniCssF(s),l=a.p+n;if(t(n,l))return r();e(s,l,null,r,o)})},r={884:0};a.f.miniCss=function(e,t){var a={400:1,404:1,408:1,541:1,768:1,953:1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=s(e).then(function(){r[e]=0},function(t){throw delete r[e],t}))}}}(),function(){var e={884:0};a.f.j=function(t,s){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var o=new Promise(function(a,s){r=e[t]=[a,s]});s.push(r[2]=o);var n=a.p+a.u(t),l=new Error,i=function(s){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var o=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",l.name="ChunkLoadError",l.type=o,l.request=n,r[1](l)}};a.l(n,i,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,n=s[0],l=s[1],i=s[2],u=0;if(n.some(function(t){return 0!==e[t]})){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(i)var d=i(a)}for(t&&t(s);u<n.length;u++)o=n[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self["webpackChunkvm_web_ide"]=self["webpackChunkvm_web_ide"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],function(){return a(248)});s=a.O(s)})();