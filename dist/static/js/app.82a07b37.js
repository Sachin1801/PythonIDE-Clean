(function(){var e={5545:function(e,t,o){"use strict";o.r(t);o(44114),o(18111),o(22489),o(20116),o(7588),o(61701);var n=o(56660),s=o(96763);const i=o(57975),d={codeHeight:0,codeItems:[],consoleItems:[],codeSelected:{},consoleSelected:{},consoleId:10001,currProj:{config:{},data:{},expandedKeys:[],pathSelected:null},allProjects:[],multiRootData:null,treeRef:null,nodeSelected:null,projList:[],autoSave:!1,autoSaveInterval:60,autoSaveNotifications:!0,fullscreenPreview:{active:!1,file:null,content:null}},a={ideInfo:d},c={ideInfo(e){return e.ideInfo}},r={addConsoleOutput(e,{id:t,type:o,text:n,prompt:s,content:i}){for(let d=0;d<e.ideInfo.consoleItems.length;d++)if(e.ideInfo.consoleItems[d].id===t){const t={type:o,text:n};"repl-input"===o&&(t.prompt=s,t.content=i||n),e.ideInfo.consoleItems[d].resultList.push(t);break}},clearConsoleOutput(e,t){for(let o=0;o<e.ideInfo.consoleItems.length;o++)if(e.ideInfo.consoleItems[o].id===t){e.ideInfo.consoleItems[o].resultList=[];break}},setConsoleWaiting(e,{id:t,waiting:o,prompt:n}){for(let i=0;i<e.ideInfo.consoleItems.length;i++)if(e.ideInfo.consoleItems[i].id===t){e.ideInfo.consoleItems[i].waitingForInput=o,void 0!==n&&(e.ideInfo.consoleItems[i].inputPrompt=n),o||(e.ideInfo.consoleItems[i].inputPrompt=""),s.log(`[STORE] Console ${t} waiting state set to:`,o);break}},setConsoleWaitingForReplInput(e,{id:t,waiting:o}){for(let n=0;n<e.ideInfo.consoleItems.length;n++)if(e.ideInfo.consoleItems[n].id===t){e.ideInfo.consoleItems[n].waitingForReplInput=o;break}},pushConsoleItem(e,t){const o=e.ideInfo.consoleItems.find(e=>e.id===t.id);o||e.ideInfo.consoleItems.push(t)},selectConsoleItem(e,t){const o=e.ideInfo.consoleItems.find(e=>e.id===t);o&&(e.ideInfo.consoleSelected=o)},handleProjects(e,t){e.ideInfo.projList=t.map(e=>"string"===typeof e?{name:e,lastAccessTime:0}:e);const o=localStorage.getItem("username");let n=null;if(o&&(n=e.ideInfo.projList.find(e=>e.name===`Local/${o}`)),!n){let t=0;for(var s=0;s<e.ideInfo.projList.length;s++)e.ideInfo.projList[s].lastAccessTime>t&&(t=e.ideInfo.projList[s].lastAccessTime,n=e.ideInfo.projList[s])}!n&&e.ideInfo.projList.length>0&&(n=e.ideInfo.projList[0]),n&&(e.ideInfo.currProj.config.name=n.name)},handleProject(e,t){const o=e=>{!e.label&&e.name&&(e.label=e.name),e.uuid||(e.uuid=e.path||e.name||Math.random().toString(36)),e.children&&e.children.forEach(e=>o(e))},n=[...e.ideInfo.currProj.expandedKeys||[]];e.ideInfo.currProj.config=t.config||{},o(t),e.ideInfo.currProj.data=t,e.ideInfo.currProj.pathSelected=e.ideInfo.currProj.config.selectFilePath,void 0!==t.config&&void 0!==t.config.expendKeys?(e.ideInfo.currProj.expandedKeys=t.config.expendKeys.filter(e=>null!==e),e.ideInfo.currProj.expandedKeys.sort()):e.ideInfo.currProj.expandedKeys=n,e.ideInfo.currProj.pathSelected&&e.ideInfo.treeRef&&(e.ideInfo.nodeSelected=e.ideInfo.treeRef.getCurrentNode())},refreshProject(e,t){const o=e=>{!e.label&&e.name&&(e.label=e.name),e.uuid||(e.uuid=e.path||e.name||Math.random().toString(36)),e.children&&e.children.forEach(e=>o(e))},n=[...e.ideInfo.currProj.expandedKeys||[]],s=e.ideInfo.currProj.pathSelected;o(t),e.ideInfo.currProj.data=t,e.ideInfo.currProj.expandedKeys=n,e.ideInfo.currProj.pathSelected=s,t.config&&(e.ideInfo.currProj.config={...e.ideInfo.currProj.config,...t.config})},handleMultipleProjects(e,t){e.ideInfo.allProjects=t;const o={label:"Projects",path:"/",type:"root",uuid:"root",children:[]},n=(e,t)=>{e.projectName=t,!e.label&&e.name&&(e.label=e.name),e.uuid||(e.uuid=e.path||e.name||Math.random().toString(36)),"/"!==e.path&&e.path!==t||(e.uuid=`${t}_root`),e.children&&e.children.forEach(e=>n(e,t))};t.forEach(e=>{if(e){const t=JSON.parse(JSON.stringify(e));n(t,e.name),t.isProjectRoot=!0,o.children.push(t)}}),e.ideInfo.multiRootData=o},handleDelProject(e,t){for(var o=0;o<e.ideInfo.projList.length;o++)if(e.ideInfo.projList[o].name===t){e.ideInfo.projList.splice(o,1);break}},handleDelFolder(e,{parentData:t,folderPath:o}){if(t&&t.children)for(var n=0;n<t.children.length;n++)if(t.children[n].path===o){t.children.splice(n,1);break}const s=[];for(let d=0;d<e.ideInfo.codeItems.length;d++)0!==e.ideInfo.codeItems[d].path.indexOf(o)&&s.push(e.ideInfo.codeItems[d]);e.ideInfo.codeItems=s,e.ideInfo.currProj.pathSelected&&0===e.ideInfo.currProj.pathSelected.indexOf(o)&&(e.ideInfo.currProj.pathSelected=s.length>0?s[0].path:"");const i=[];for(let d=0;d<e.ideInfo.currProj.expandedKeys.length;d++)0!==e.ideInfo.currProj.expandedKeys[d].indexOf(o)&&i.push(e.ideInfo.currProj.expandedKeys[d]);e.ideInfo.currProj.expandedKeys=i},handleGetFile(e,{filePath:t,data:o,save:n,isMedia:d,projectName:a}){const c=a||e.ideInfo.currProj?.data?.name||"default";for(let s=0;s<e.ideInfo.codeItems.length;s++)if(e.ideInfo.codeItems[s].path===t&&e.ideInfo.codeItems[s].projectName===c)return e.ideInfo.currProj.pathSelected=t,void(e.ideInfo.codeSelected=e.ideInfo.codeItems[s]);const r=5;if(e.ideInfo.codeItems.length>=r){const t=e.ideInfo.codeItems.shift();s.log(`Tab limit (${r}) reached. Closed "${t.name}" to open new file.`),"undefined"!==typeof window&&window.ElMessage&&window.ElMessage({type:"warning",message:`Tab limit (${r}) reached. Closed "${t.name}" to open new file.`,duration:3e3})}e.ideInfo.codeItems.push({name:i.basename(t),content:o,path:t,projectName:c,codemirror:null,isMedia:d||!1}),e.ideInfo.currProj.pathSelected=t,e.ideInfo.codeSelected=e.ideInfo.codeItems[e.ideInfo.codeItems.length-1],e.ideInfo.treeRef&&(e.ideInfo.treeRef.setCurrentKey(e.ideInfo.currProj.pathSelected),e.ideInfo.nodeSelected=e.ideInfo.treeRef.getCurrentNode())},handleDelFile(e,{parentData:t,filePath:o}){for(let n=0;n<e.ideInfo.codeItems.length;n++)if(e.ideInfo.codeItems[n].path===o){n>0?e.ideInfo.currProj.pathSelected=e.ideInfo.codeItems[n-1].path:n<e.ideInfo.codeItems.length-1&&(e.ideInfo.currProj.pathSelected=e.ideInfo.codeItems[n+1].path),e.ideInfo.codeItems.splice(n,1);break}if(t)for(let n=0;n<t.children.length;n++)if(t.children[n].path===o){t.children.splice(n,1);break}},addChildrenNode(e,{name:t,path:o,type:n}){e.ideInfo.nodeSelected&&"dir"===e.ideInfo.nodeSelected.type&&(e.ideInfo.nodeSelected.children.push({name:t,label:t,uuid:o,path:o,type:n,children:[]}),e.ideInfo.currProj.expandedKeys.push(e.ideInfo.nodeSelected.path),"file"==n?(e.ideInfo.currProj.pathSelected=o,e.ideInfo.codeItems.push({name:t,content:"",path:o,codemirror:null}),e.ideInfo.codeSelected=e.ideInfo.codeItems[e.ideInfo.codeItems.length-1]):e.ideInfo.currProj.expandedKeys.push(o))},handleRename(e,t){if(e.ideInfo.nodeSelected&&e.ideInfo.nodeSelected.type)if("/"===e.ideInfo.nodeSelected.path)e.ideInfo.currProj.config.name=t,e.ideInfo.currProj.data.name=t,e.ideInfo.currProj.data.label=t;else{const o=(e,t)=>{if(e.path=i.join(t,e.name),e.uuid=e.path,"dir"===e.type&&e.children)for(let n=0;n<e.children.length;n++)o(e.children[n],e.path)},n=i.join(i.dirname(e.ideInfo.nodeSelected.path),t);for(let s=0;s<e.ideInfo.codeItems.length;s++)e.ideInfo.codeItems[s].path===e.ideInfo.nodeSelected.path?(e.ideInfo.codeItems[s].name=t,e.ideInfo.codeItems[s].path=n):0===e.ideInfo.codeItems[s].path.indexOf(e.ideInfo.nodeSelected.path)&&(e.ideInfo.codeItems[s].path=e.ideInfo.codeItems[s].path.replace(e.ideInfo.nodeSelected.path,n));for(let s=0;s<e.ideInfo.consoleItems.length;s++)e.ideInfo.consoleItems[s].path===e.ideInfo.nodeSelected.path?(e.ideInfo.consoleItems[s].name=t,e.ideInfo.consoleItems[s].path=n):0===e.ideInfo.consoleItems[s].path.indexOf(e.ideInfo.nodeSelected.path)&&(e.ideInfo.consoleItems[s].path=e.ideInfo.consoleItems[s].path.replace(e.ideInfo.nodeSelected.path,n));for(let t=0;t<e.ideInfo.currProj.expandedKeys.length;t++)0===e.ideInfo.currProj.expandedKeys[t].indexOf(e.ideInfo.nodeSelected.path)&&(e.ideInfo.currProj.expandedKeys[t]=e.ideInfo.currProj.expandedKeys[t].replace(e.ideInfo.nodeSelected.path,n));0===e.ideInfo.currProj.pathSelected.indexOf(e.ideInfo.nodeSelected.path)&&(e.ideInfo.currProj.pathSelected=e.ideInfo.currProj.pathSelected.replace(e.ideInfo.nodeSelected.path,n)),e.ideInfo.nodeSelected.name=t,e.ideInfo.nodeSelected.label=t,o(e.ideInfo.nodeSelected,i.dirname(e.ideInfo.nodeSelected.path))}},handleCreateFile(e,t){e.ideInfo.currProj.expandedKeys.push(t),e.ideInfo.currProj.pathSelected=t},handleCreateFolder(e,t){e.ideInfo.currProj.expandedKeys.push(t)},handleRunResult(e,t){if(0===t.code)if(null===t.data||void 0===t.data.stdout||null===t.data.stdout){for(let o=0;o<e.ideInfo.consoleItems.length;o++)if(e.ideInfo.consoleItems[o].id===t.id){e.ideInfo.consoleItems[o].run||e.ideInfo.consoleItems[o].isReplMode||(e.ideInfo.consoleItems[o].resultList=[]),e.ideInfo.consoleItems[o].run=!0;break}}else for(let o=0;o<e.ideInfo.consoleItems.length;o++){if(e.ideInfo.consoleItems[o].id!==t.id)continue;e.ideInfo.consoleItems[o].resultList.length>3e4&&e.ideInfo.consoleItems[o].resultList.splice(0,100);const n=`${t.data.stdout}`;if(e.ideInfo.consoleItems[o].isReplMode&&n.includes(">>> ")){const t=n.split(">>> ");t[0]&&e.ideInfo.consoleItems[o].resultList.push({type:"text",text:t[0]}),e.ideInfo.consoleItems[o].resultList.push({type:"repl-prompt",text:">>> "}),e.ideInfo.consoleItems[o].waitingForReplInput=!0}else e.ideInfo.consoleItems[o].resultList.push(n);break}else if(2e3===t.code){s.log("[FRONTEND-INPUT-DEBUG] *** RECEIVED INPUT REQUEST!",t),s.log("[FRONTEND-INPUT-DEBUG] Data:",t.data),s.log("[FRONTEND-INPUT-DEBUG] Prompt:",t.data?.prompt);for(let o=0;o<e.ideInfo.consoleItems.length;o++){if(e.ideInfo.consoleItems[o].id!==t.id)continue;s.log("[FRONTEND-INPUT-DEBUG] Found matching console item at index:",o);const n=t.data&&t.data.prompt?t.data.prompt:"";s.log("[FRONTEND-INPUT-DEBUG] Setting prompt:",n),e.ideInfo.consoleItems[o].waitingForInput=!0,e.ideInfo.consoleItems[o].inputPrompt=n,s.log("[FRONTEND-INPUT-DEBUG] Console item updated with waitingForInput=true"),s.log("[FRONTEND-INPUT-DEBUG] Console item state:",e.ideInfo.consoleItems[o]);break}}else if(2001===t.code){s.log("[FRONTEND-INPUT-DEBUG] Input processed confirmation received");for(let o=0;o<e.ideInfo.consoleItems.length;o++)if(e.ideInfo.consoleItems[o].id===t.id){e.ideInfo.consoleItems[o].waitingForInput=!1,e.ideInfo.consoleItems[o].inputPrompt="",s.log("[FRONTEND-INPUT-DEBUG] Console waiting state cleared after input processed");break}}else if(3e3===t.code){for(let o=0;o<e.ideInfo.consoleItems.length;o++)if(e.ideInfo.consoleItems[o].id===t.id){if(e.ideInfo.consoleItems[o].resultList.push("[Matplotlib Figure Displayed]"),t.data&&t.data.data){const e=window.open("","_blank");e&&e.document.write(`\n              <html>\n                <head><title>Matplotlib Figure</title></head>\n                <body style="margin:0;padding:20px;background:#f0f0f0;text-align:center;">\n                  <img src="${t.data.data}" style="max-width:100%;height:auto;box-shadow:0 2px 8px rgba(0,0,0,0.1);">\n                  <br><br>\n                  <button onclick="downloadImage()" style="padding:10px 20px;font-size:16px;cursor:pointer;">Download Image</button>\n                  <script>\n                    function downloadImage() {\n                      const a = document.createElement('a');\n                      a.href = document.querySelector('img').src;\n                      a.download = 'matplotlib_figure_' + Date.now() + '.png';\n                      a.click();\n                    }\n                  <\/script>\n                </body>\n              </html>\n            `)}break}}else if(5e3===t.code){s.log("[REPL-MODE] Received code 5000 - REPL mode signal",t);for(let o=0;o<e.ideInfo.consoleItems.length;o++)if(e.ideInfo.consoleItems[o].id===t.id){e.ideInfo.consoleItems[o].isReplMode=!0,e.ideInfo.consoleItems[o].replActive=!0,e.ideInfo.consoleItems[o].resultList.push({type:"repl-prompt",text:">>> "}),e.ideInfo.consoleItems[o].waitingForReplInput=!0,s.log("[REPL-MODE] Console item updated for REPL mode"),setTimeout(()=>{const e=document.querySelector(".repl-input");e&&e.focus()},100);break}}else for(let o=0;o<e.ideInfo.consoleItems.length;o++){if(e.ideInfo.consoleItems[o].id!==t.id)continue;e.ideInfo.consoleItems[o].run||e.ideInfo.consoleItems[o].stop||(e.ideInfo.consoleItems[o].resultList=[]),t.data&&t.data.stdout&&e.ideInfo.consoleItems[o].resultList.push(`${t.data.stdout}`);const n=document.getElementById("console-"+e.ideInfo.consoleItems[o].id);void 0!==n&&null!==n&&(n.scrollTop=n.scrollHeight),e.ideInfo.consoleItems[o].run=!1;break}},handleStopResult(e,{consoleId:t,dict:o}){if(0===o.code)for(let n=0;n<e.ideInfo.consoleItems.length;n++)t&&e.ideInfo.consoleItems[n].id!==t||(e.ideInfo.consoleItems[n].stop=!0,e.ideInfo.consoleItems[n].run=!1)},addExpandNodeKey(e,t){e.ideInfo.currProj.expandedKeys.indexOf(t)<0&&e.ideInfo.currProj.expandedKeys.push(t)},delExpandNodeKey(e,t){e.ideInfo.currProj.expandedKeys.splice(e.ideInfo.currProj.expandedKeys.findIndex(e=>e===t),1)},setNodeSelected(e,t){e.ideInfo.nodeSelected=t},updateCodeItem(e,{index:t,updates:o}){t>=0&&t<e.ideInfo.codeItems.length&&Object.assign(e.ideInfo.codeItems[t],o)},setPathSelected(e,t){e.ideInfo.currProj.pathSelected=t},setCodeSelected(e,t){e.ideInfo.codeSelected=t},setConsoleSelected(e,t){e.ideInfo.consoleSelected=t},setTreeRef(e,t){e.ideInfo.treeRef=t},assignConsoleSelected(e,t){t&&"object"===typeof t&&Object.assign(e.ideInfo.consoleSelected,t)},spliceConsoleItems(e,{start:t,count:o}){e.ideInfo.consoleItems.splice(t,o)},setConsoleId(e,t){e.ideInfo.consoleId=t},addConsoleItem(e,t){e.ideInfo.consoleItems.push(t)},resetConsoleItem(e,{consoleId:t,run:o,stop:n,resultList:s}){for(let i=0;i<e.ideInfo.consoleItems.length;i++)if(e.ideInfo.consoleItems[i].id===t){void 0!==o&&(e.ideInfo.consoleItems[i].run=o),void 0!==n&&(e.ideInfo.consoleItems[i].stop=n),void 0!==s&&(e.ideInfo.consoleItems[i].resultList=s);break}},setConsoleItems(e,t){e.ideInfo.consoleItems=t},addCodeItem(e,t){e.ideInfo.codeItems.push(t)},setCodeItems(e,t){e.ideInfo.codeItems=t},setCodeItemMirror(e,{index:t,codemirror:o}){e.ideInfo.codeItems[t].codemirror=o},setCodeItemContent(e,{index:t,content:o}){e.ideInfo.codeItems[t].content=o},setCodeHeight(e,t){e.ideInfo.codeHeight=t},setFullscreenPreview(e,{file:t,content:o}){e.ideInfo.fullscreenPreview={active:!0,file:t,content:o}},closeFullscreenPreview(e){e.ideInfo.fullscreenPreview={active:!1,file:null,content:null}},setEditorOption(e,{option:t,value:o}){s.log(`Editor option ${t} set to ${o}`)},setAutoSave(e,t){e.ideInfo.autoSave=t,s.log(`Auto-save set to ${t}`)},setAutoSaveInterval(e,t){e.ideInfo.autoSaveInterval=parseInt(t),s.log(`Auto-save interval set to ${t} seconds`)},setAutoSaveNotifications(e,t){e.ideInfo.autoSaveNotifications=t,s.log(`Auto-save notifications set to ${t}`)},addAutoSaveNotification(e,{message:t,timestamp:o}){s.log(`Auto-save notification: ${t}`)}},l={[n.qB](e,{wsKey:t,msgId:o,callback:s}){e.dispatch("websocket/sendCmd",{wsKey:t,msgId:o,cmd:n.qB,data:{},callback:s},{root:!0})},[n.QQ](e,{wsKey:t,projectName:o,callback:s}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.QQ,data:{projectName:o},callback:s},{root:!0})},[n.KV](e,{wsKey:t,projectName:o,callback:s}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.KV,data:{projectName:o},callback:s},{root:!0})},[n.DO](e,{wsKey:t,projectName:o,callback:s}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.DO,data:{projectName:o},callback:s},{root:!0})},[n.sh](e,{wsKey:t,oldName:o,newName:s,callback:i}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.sh,data:{oldName:o,newName:s},callback:i},{root:!0})},[n.xv](e,{wsKey:t,callback:o}){o&&o({code:0,data:{}})},[n.Zd](e,{wsKey:t,projectName:o,parentPath:s,fileName:i,callback:d}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.Zd,data:{projectName:o||e.state.ideInfo.currProj.data.name,parentPath:s||e.state.ideInfo.nodeSelected.path,fileName:i},callback:d},{root:!0})},[n._L](e,{wsKey:t,projectName:o,filePath:s,fileData:i,complete:d,line:a,column:c,callback:r}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n._L,data:{projectName:o||e.state.ideInfo.currProj.data.name,filePath:s,fileData:i,complete:d,line:a,column:c},callback:r},{root:!0})},[n.Jh](e,{wsKey:t,projectName:o,filePath:s,binary:i,callback:d}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.Jh,data:{projectName:o||e.state.ideInfo.currProj.data.name,filePath:s,binary:i||!1},callback:d},{root:!0})},[n.w7](e,{wsKey:t,projectName:o,filePath:s,callback:i}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.w7,data:{projectName:o||e.state.ideInfo.currProj.data.name,filePath:s},callback:i},{root:!0})},[n.Z0](e,{wsKey:t,projectName:o,oldPath:s,fileName:i,callback:d}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.Z0,data:{projectName:o||e.state.ideInfo.currProj.data.name,oldPath:s||e.state.ideInfo.nodeSelected.path,newName:i},callback:d},{root:!0})},[n.GG](e,{wsKey:t,projectName:o,oldPath:s,newPath:i,callback:d}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.GG,data:{projectName:o||e.state.ideInfo.currProj.data.name,oldPath:s,newPath:i},callback:d},{root:!0})},[n.p_](e,{wsKey:t,projectName:o,parentPath:s,folderName:i,callback:d}){let a="";a="/"===s||""===s?i:`${s}/${i}`,e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.p_,data:{projectName:o||e.state.ideInfo.currProj.data.name,folderPath:a},callback:d},{root:!0})},[n.Ec](e,{wsKey:t,projectName:o,folderPath:s,callback:i}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.Ec,data:{projectName:o||e.state.ideInfo.currProj.data.name,folderPath:s},callback:i},{root:!0})},[n.Zz](e,{wsKey:t,projectName:o,oldPath:s,folderName:i,callback:d}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.Zz,data:{projectName:o||e.state.ideInfo.currProj.data.name,oldPath:s||e.state.ideInfo.nodeSelected.path,newName:i},callback:d},{root:!0})},[n.mr](e,{wsKey:t,projectName:o,oldPath:s,newPath:i,callback:d}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.mr,data:{projectName:o||e.state.ideInfo.currProj.data.name,oldPath:s,newPath:i},callback:d},{root:!0})},[n.RX](e,{wsKey:t,source:o,line:s,column:i,callback:d}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.RX,data:{source:o,line:s,column:i},callback:d},{root:!0})},[n.jr](e,{wsKey:t,msgId:o,command:s,callback:i}){e.dispatch("websocket/sendCmd",{wsKey:t,msgId:o,cmd:n.jr,data:{command:s},callback:i},{root:!0})},[n.j8](e,{wsKey:t,msgId:o,projectName:s,filePath:i,callback:d}){e.dispatch("websocket/sendCmd",{wsKey:t,msgId:o,cmd:n.j8,data:{projectName:s||e.state.ideInfo.currProj.data.name,filePath:i},callback:d},{root:!0})},[n.aQ](e,{wsKey:t,consoleId:o,callback:s}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.aQ,data:{program_id:o},callback:s},{root:!0})},[n.WP](e,{wsKey:t,program_id:o,input:s,callback:i}){e.dispatch("websocket/sendCmd",{wsKey:t,cmd:n.WP,data:{program_id:o,input:s},callback:i},{root:!0})},sendBugReport(e,t){return new Promise((o,n)=>{e.dispatch("websocket/sendCmd",{wsKey:"main",msgId:Date.now(),cmd:"send_bug_report",data:t,callback:{limits:1,callback:e=>{e&&e.data?o(e.data):n(new Error("Failed to send bug report"))}}},{root:!0})})},saveFile(e,{codeItem:t,isAutoSave:o=!1}){const i=o?"[AUTO-SAVE]":"[MANUAL-SAVE]";return s.log(`${i} Saving file: ${t.path}`),e.dispatch(n._L,{filePath:t.path,fileData:t.content,complete:!1,line:0,column:0,callback:n=>{n&&0===n.code?(s.log(`${i} Successfully saved: ${t.path}`),o&&e.state.ideInfo.autoSaveNotifications&&e.commit("addAutoSaveNotification",{message:`Auto-saved: ${t.name}`,timestamp:Date.now()})):s.error(`${i} Failed to save: ${t.path}`,n)}})}};t["default"]={namespaced:!0,state:a,getters:c,actions:l,mutations:r}},15450:function(e,t,o){"use strict";o.r(t)},30777:function(e,t,o){"use strict";o.r(t);o(18111),o(7588);const n=o(78043),s={};n.keys().forEach(e=>{"./index.js"!==e&&(s[e.replace(/(\.\/|\.js)/g,"")]=n(e).default)}),t["default"]=s},33406:function(e,t,o){"use strict";o.r(t);o(44114);var n=o(15697),s=o(96763);const i={default:{location:{protocol:"https:"===window.location.protocol?"wss:":"ws:",host:window.location.hostname,port:"localhost"===window.location.hostname?"10086":window.location.port||("https:"===window.location.protocol?"443":"80"),pathname:"/ws",search:""},protocols:[],options:{WebSocket:WebSocket,maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),reconnectionDelayGrowFactor:1.3,minUptime:5e3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!0},logger:s,rws:null,connected:!1,authenticated:!1,msgId:1,jsonMsgCallbacks:{},jsonMsgHandlers:[]}},d={wsInfoMap:i},a={wsInfo:e=>t=>e.wsInfoMap[t||"default"]},c={setLocation(e,{wsKey:t,location:o}){const n=e.wsInfoMap[t||"default"];if(!n)return-1;o&&"object"===typeof o&&(n.location=Object.assign(n.location,o))},setProtocols(e,{wsKey:t,protocols:o}){const n=e.wsInfoMap[t||"default"];if(!n)return-1;o&&"object"===typeof options&&(n.protocols=Object.assign(n.protocols,o))},setOptions(e,{wsKey:t,options:o}){const n=e.wsInfoMap[t||"default"];if(!n)return-1;o&&"object"===typeof o&&(n.options=Object.assign(n.options,o))},setRws(e,{wsKey:t,rws:o}){const n=e.wsInfoMap[t||"default"];if(!n)return-1;n.rws=o},setConnected(e,{wsKey:t,connected:o}){const n=e.wsInfoMap[t||"default"];if(!n)return-1;n.connected=o},setAuthenticated(e,{wsKey:t,authenticated:o}){const n=e.wsInfoMap[t||"default"];if(!n)return-1;n.authenticated=o},setMsgId(e,{wsKey:t,msgId:o}){const n=e.wsInfoMap[t||"default"];if(!n)return-1;n.msgId=o},addJsonMsgCallback(e,{wsKey:t,msgId:o,callback:n}){const s=e.wsInfoMap[t||"default"];if(!s)return-1;s.jsonMsgCallbacks[o]=n},delJsonMsgCallback(e,{wsKey:t,msgId:o,trigger:n}){const s=e.wsInfoMap[t||"default"];if(!s)return-1;if(o){const e=s.jsonMsgCallbacks[o];e&&(!0===n&&0!==e.limits&&e.callback({code:10086}),delete s.jsonMsgCallbacks[o])}else for(const i in s.jsonMsgCallbacks){const e=s.jsonMsgCallbacks[i];e&&!0===n&&0!==e.limits&&e.callback({code:10086}),delete s.jsonMsgCallbacks[i]}},setJsonMsgCallback(e,{wsKey:t,msgId:o,limits:n,finished:s}){const i=e.wsInfoMap[t||"default"];if(!i)return-1;i.jsonMsgCallbacks[o].limits=n||i.jsonMsgCallbacks[o].limits,i.jsonMsgCallbacks[o].limits=s||i.jsonMsgCallbacks[o].finished},callJsonMsgCallback(e,{wsKey:t,dict:o}){const n=e.wsInfoMap[t||"default"];if(!n)return-1;const i=n.jsonMsgCallbacks[o.id];if(i){if(0!==i.limits){try{o&&"object"===typeof o&&void 0!==o.data?i.callback(o):(s.warn("[WebSocket] Skipping callback with invalid/undefined data:",o),i.callback({...o,data:o.data||null,code:o.code||0}))}catch(d){s.warn("[WebSocket] Callback error suppressed:",d)}i.limits-=1}i.finished=!0,0===i.limits&&delete n.jsonMsgCallbacks[o.id]}},close(e,{wsKey:t}){const o=e.wsInfoMap[t||"default"];if(!o)return-1;o&&o.rws&&(o.rws.onopen=null,o.rws.onclose=null,o.rws.onerror=null,o.rws.onmessage=null,o.rws.close())},reconnect(e,{wsKey:t}){const o=e.wsInfoMap[t||"default"];if(!o)return-1;o.rws&&o.rws.reconnect()},sendCmd(e,{wsKey:t,msgId:o,cmd:s,data:i,callback:d}){const a=e.wsInfoMap[t||"default"];if(!a)return-1;if(!a.rws)return a.logger.error("Websocket is not init"),-1;if(a.rws.readyState!==n.A.OPEN)return a.logger.error("Websocket readyState is not open"),-2;const c={cmd:s,data:i||{}};c.id=o||a.msgId,c.id===a.msgId&&(a.msgId+=1,a.msgId>1e4&&(a.msgId=1)),d&&("function"===typeof d?a.jsonMsgCallbacks[c.id]={callback:d,limits:1,finished:!1}:"object"===typeof d&&d.callback&&(void 0===d.limits&&(d.limits=1),d.finished=!1,a.jsonMsgCallbacks[c.id]=d));const r=JSON.stringify(c);return a.options.debug&&a.logger.log(`Websocket send: ${r}`),a.rws.send(r),c.id},addEventListener(e,{wsKey:t,type:o,listener:n}){const s=e.wsInfoMap[t||"default"];if(!s)return-1;s.rws&&s.rws.addEventListener(o,n)},addJsonMsgHandler(e,{wsKey:t,handler:o}){const n=e.wsInfoMap[t||"default"];if(!n)return-1;n.jsonMsgHandlers.includes(o)||n.jsonMsgHandlers.push(o)}},r={init(e,{wsKey:t,location:o,options:i}){const d=e.state.wsInfoMap[t||"default"];if(!d)return-1;let a;e.commit("setLocation",{wsKey:t,location:o}),e.commit("setOptions",{wsKey:t,options:i}),a=d.location.port&&"80"!==d.location.port&&"443"!==d.location.port&&""!==d.location.port?`${d.location.protocol}//${d.location.host}:${d.location.port}${d.location.pathname}${d.location.search}`:`${d.location.protocol}//${d.location.host}${d.location.pathname}${d.location.search}`,s.log("ðŸ”Œ [WebSocket] Attempting connection to:",a),s.log("ðŸ”Œ [WebSocket] Location config:",d.location),d.logger.log(`Websocket init: ${a}`),d.rws&&e.dispatch("close",{wsKey:t});const c=new n.A(a,d.protocols,d.options);c.onopen=function(o){e.commit("setConnected",{wsKey:t,connected:!0}),d.options.debug&&d.logger.log("Websocket onopen event");const n=localStorage.getItem("session_id");if(n){const e={cmd:"authenticate",session_id:n};c.send(JSON.stringify(e)),d.logger.log("Sent authentication with session:",n.substring(0,20)+"...")}else d.logger.log("No session found, WebSocket connected without authentication")},c.onclose=function(o){e.commit("setConnected",{wsKey:t,connected:!1}),d.options.debug&&d.logger.log("Websocket onclose event")},c.onerror=function(o){e.commit("setConnected",{wsKey:t,connected:!1}),d.options.debug&&d.logger.log("Websocket onerror event")},c.onmessage=function(o){d.options.debug&&d.logger.log(`Websocket onmessage: ${o.data}`);const n=JSON.parse(o.data)||{};if("auth_required"!==n.type){if("auth_success"===n.type){d.logger.log("Authentication successful:",n.username),e.commit("setAuthenticated",{wsKey:t,authenticated:!0});const o=n.username||localStorage.getItem("username"),s=n.role||localStorage.getItem("role"),i="student"===s?`Local/${o}`:"Local",a={cmd:"ide_get_project",project:i};c.send(JSON.stringify(a)),d.logger.log("Requested initial project:",i)}else if("error"===n.type&&n.message&&n.message.includes("Not authenticated"))return d.logger.warn("Not authenticated, waiting for authentication..."),void e.commit("setAuthenticated",{wsKey:t,authenticated:!1});e.commit("callJsonMsgCallback",{wsKey:t,dict:n});for(const e of d.jsonMsgHandlers)e(n)}else d.logger.log("Authentication required by server")},e.commit("setRws",{wsKey:t,rws:c})},close(e,{wsKey:t}){const o=i[t||"default"];o&&o.rws&&(e.commit("close",{wsKey:t}),e.commit("delJsonMsgCallback",{wsKey:t,msgId:null,trigger:!0}),e.commit("setRws",{wsKey:t,rws:null}))},reconnect(e,{wsKey:t}){const o=i[t||"default"];if(!o)return-1;e.commit("reconnect",{wsKey:t})},sendCmd(e,{wsKey:t,msgId:o,cmd:s,data:d,callback:a}){const c=i[t||"default"];if(!c)return-1;if(!c.rws)return c.logger.error("Websocket is not init"),-1;if(c.rws.readyState!==n.A.OPEN)return c.logger.error("Websocket readyState is not open"),-2;const r={cmd:s,data:d||{}};r.id=o||c.msgId,r.id===c.msgId&&(e.commit("setMsgId",{wsKey:t,msgId:c.msgId+1}),c.msgId>1e4&&e.commit("setMsgId",{wsKey:t,msgId:1})),a&&("function"===typeof a?e.commit("addJsonMsgCallback",{wsKey:t,msgId:r.id,callback:{callback:a,limits:1,finished:!1}}):"object"===typeof a&&a.callback&&(void 0===a.limits&&(a.limits=1),a.finished=!1,e.commit("addJsonMsgCallback",{wsKey:t,msgId:r.id,callback:a})));const l=JSON.stringify(r);return c.options.debug&&c.logger.log(`Websocket send: ${l}`),c.rws.send(l),r.id}};t["default"]={namespaced:!0,state:d,getters:a,actions:r,mutations:c}},36209:function(e,t,o){"use strict";var n=o(53751),s=(o(4188),o(16990)),i=o(20641);function d(e,t,o,n,s,d){const a=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.Wv)(a)}var a={name:"App",components:{}},c=o(66262);const r=(0,c.A)(a,[["render",d]]);var l=r,f=o(75220);const u=[{path:"/",name:"VmIndex",redirect:"/editor"},{path:"/editor",component:()=>Promise.all([o.e(576),o.e(691),o.e(155),o.e(590)]).then(o.bind(o,64590)),meta:{title:"Vm Web IDE"}},{path:"/test-splitpanes",component:()=>o.e(376).then(o.bind(o,71376)),meta:{title:"Test Splitpanes"}},{path:"/editor-new",component:()=>Promise.all([o.e(576),o.e(691),o.e(301)]).then(o.bind(o,20301)),meta:{title:"Vm Web IDE - New"}},{path:"/admin/users",component:()=>Promise.all([o.e(576),o.e(155),o.e(45)]).then(o.bind(o,98045)),meta:{title:"Admin Password Manager"}}],m=(0,f.aE)({history:(0,f.LA)(),routes:u});var p=m,I=o(66278),h=o(72920),g=o(61763),w=o(84819),b=o(30777);const y=!1,j=(0,I.y$)({actions:h,getters:g,mutations:w,modules:b["default"],strict:y});var k=j;o(15450),o(46786);const P=(0,n.Ef)(l);P.use(p),P.use(k),window.GlobalStore=k,window.ElMessage=s.nk,P.mount("#app")},46786:function(e,t,o){"use strict";o.r(t)},56660:function(e,t,o){"use strict";o.d(t,{DO:function(){return d},Ec:function(){return h},GG:function(){return p},Jh:function(){return f},KV:function(){return i},QQ:function(){return s},RX:function(){return b},WP:function(){return P},Z0:function(){return m},Zd:function(){return r},Zz:function(){return g},_L:function(){return l},aQ:function(){return k},j8:function(){return j},jr:function(){return y},mr:function(){return w},p_:function(){return I},qB:function(){return n},sh:function(){return a},w7:function(){return u},xv:function(){return c}});const n="ide_list_projects",s="ide_get_project",i="ide_create_project",d="ide_delete_project",a="ide_rename_project",c="ide_save_project",r="ide_create_file",l="ide_write_file",f="ide_get_file",u="ide_delete_file",m="ide_rename_file",p="ide_move_file",I="ide_create_folder",h="ide_delete_folder",g="ide_rename_folder",w="ide_move_folder",b="autocomplete_python",y="run_pip_command",j="run_python_program",k="stop_python_program",P="send_program_input"},61763:function(){},72920:function(){},78043:function(e,t,o){var n={"./ide.js":5545,"./index.js":30777,"./websocket.js":33406};function s(e){var t=i(e);return o(t)}function i(e){if(!o.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=i,e.exports=s,s.id=78043},84819:function(){}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,i){if(!n){var d=1/0;for(l=0;l<e.length;l++){n=e[l][0],s=e[l][1],i=e[l][2];for(var a=!0,c=0;c<n.length;c++)(!1&i||d>=i)&&Object.keys(o.O).every(function(e){return o.O[e](n[c])})?n.splice(c--,1):(a=!1,i<d&&(d=i));if(a){e.splice(l--,1);var r=s();void 0!==r&&(t=r)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,s,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce(function(t,n){return o.f[n](e,t),t},[]))}}(),function(){o.u=function(e){return"static/js/"+e+"."+{45:"1f7adf53",155:"ce662bb5",301:"bf7fc6e2",376:"f88f7291",576:"5624ebfd",590:"d08fc68c",691:"96a2bf52"}[e]+".js"}}(),function(){o.miniCssF=function(e){return"static/css/"+e+"."+{45:"696f4be4",301:"a7613c65",376:"d425c56e",590:"6a1167cc",691:"8d417b96"}[e]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vm.web.ide:";o.l=function(n,s,i,d){if(e[n])e[n].push(s);else{var a,c;if(void 0!==i)for(var r=document.getElementsByTagName("script"),l=0;l<r.length;l++){var f=r[l];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")==t+i){a=f;break}}a||(c=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",t+i),a.src=n),e[n]=[s];var u=function(t,o){a.onerror=a.onload=null,clearTimeout(m);var s=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach(function(e){return e(o)}),t)return t(o)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),c&&document.head.appendChild(a)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,s,i){var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",o.nc&&(d.nonce=o.nc);var a=function(o){if(d.onerror=d.onload=null,"load"===o.type)s();else{var n=o&&o.type,a=o&&o.target&&o.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+n+": "+a+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=n,c.request=a,d.parentNode&&d.parentNode.removeChild(d),i(c)}};return d.onerror=d.onload=a,d.href=t,n?n.parentNode.insertBefore(d,n.nextSibling):document.head.appendChild(d),d},t=function(e,t){for(var o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var s=o[n],i=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(i===e||i===t))return s}var d=document.getElementsByTagName("style");for(n=0;n<d.length;n++){s=d[n],i=s.getAttribute("data-href");if(i===e||i===t)return s}},n=function(n){return new Promise(function(s,i){var d=o.miniCssF(n),a=o.p+d;if(t(d,a))return s();e(n,a,null,s,i)})},s={524:0};o.f.miniCss=function(e,t){var o={45:1,301:1,376:1,590:1,691:1};s[e]?t.push(s[e]):0!==s[e]&&o[e]&&t.push(s[e]=n(e).then(function(){s[e]=0},function(t){throw delete s[e],t}))}}}(),function(){var e={524:0};o.f.j=function(t,n){var s=o.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var i=new Promise(function(o,n){s=e[t]=[o,n]});n.push(s[2]=i);var d=o.p+o.u(t),a=new Error,c=function(n){if(o.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var i=n&&("load"===n.type?"missing":n.type),d=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+d+")",a.name="ChunkLoadError",a.type=i,a.request=d,s[1](a)}};o.l(d,c,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,i,d=n[0],a=n[1],c=n[2],r=0;if(d.some(function(t){return 0!==e[t]})){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(c)var l=c(o)}for(t&&t(n);r<d.length;r++)i=d[r],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(l)},n=self["webpackChunkvm_web_ide"]=self["webpackChunkvm_web_ide"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],function(){return o(36209)});n=o.O(n)})();