"use strict";(self["webpackChunkvm_web_ide"]=self["webpackChunkvm_web_ide"]||[]).push([[301],{20301:function(e,t,o){o.r(t),o.d(t,{default:function(){return Pe}});var i=o(5012),n=o(22542),l=o(7093),s=o(22164),a=o(94411),d=o(16309),r=o(6671),c=o(91030),p=o(52707),h=o(86461),u=o(20641),m=o(53751);const v={class:"top-menu-container"},g={class:"nav-menu"},f={class:"nav__items-left"},k={class:"nav__item"},S=["aria-expanded"],w={class:"nav__dropdown-item"},b={class:"nav__dropdown-item"},C={class:"nav__dropdown-item"},I=["disabled"],L={class:"nav__dropdown-item"},D={class:"nav__dropdown-item"},P={class:"nav__dropdown-item"},F=["disabled"],y={class:"nav__dropdown-item"},z={class:"nav__dropdown-item"},_=["disabled"],x={class:"header-center-absolute"},E={class:"header-right"};function R(e,t,o,i,n,l){const s=(0,u.g2)("Play"),a=(0,u.g2)("Square"),d=(0,u.g2)("Upload"),r=(0,u.g2)("Settings");return(0,u.uX)(),(0,u.CE)("div",v,[(0,u.Lk)("nav",g,[(0,u.Lk)("ul",f,[(0,u.Lk)("li",k,[(0,u.Lk)("button",{class:"nav__item-button",onClick:t[0]||(t[0]=(0,m.D$)(e=>l.toggleDropdown("file"),["stop"])),"aria-haspopup":"menu","aria-expanded":"file"===n.activeDropdown},t[14]||(t[14]=[(0,u.Lk)("span",{class:"nav__item-header"},"File",-1),(0,u.Lk)("svg",{class:"nav__item-triangle",width:"9",height:"6",viewBox:"0 0 9 6",xmlns:"http://www.w3.org/2000/svg"},[(0,u.Lk)("polygon",{points:"4.5 6 9 0 0 0",fill:"currentColor"})],-1)]),8,S),(0,u.bo)((0,u.Lk)("ul",{class:"nav__dropdown",onClick:t[9]||(t[9]=(0,m.D$)(()=>{},["stop"]))},[(0,u.Lk)("li",w,[(0,u.Lk)("button",{onClick:t[1]||(t[1]=e=>l.newFile())}," New File ")]),(0,u.Lk)("li",b,[(0,u.Lk)("button",{onClick:t[2]||(t[2]=e=>l.openFile())}," Open File ")]),(0,u.Lk)("li",C,[(0,u.Lk)("button",{onClick:t[3]||(t[3]=e=>l.duplicateFile()),disabled:!l.hasSelectedFile}," Duplicate ",8,I)]),(0,u.Lk)("li",L,[(0,u.Lk)("button",{onClick:t[4]||(t[4]=e=>l.saveFile())}," Save ")]),(0,u.Lk)("li",D,[(0,u.Lk)("button",{onClick:t[5]||(t[5]=e=>l.saveAsFile())}," Save As ")]),(0,u.Lk)("li",P,[(0,u.Lk)("button",{onClick:t[6]||(t[6]=e=>l.moveFile()),disabled:!l.hasSelectedFile}," Move ",8,F)]),(0,u.Lk)("li",y,[(0,u.Lk)("button",{onClick:t[7]||(t[7]=e=>l.downloadFile())},"Download")]),(0,u.Lk)("li",z,[(0,u.Lk)("button",{onClick:t[8]||(t[8]=e=>l.deleteFile()),disabled:!l.hasSelectedFile,class:"delete-option"}," Delete File ",8,_)])],512),[[m.aG,"file"===n.activeDropdown]])])])]),(0,u.Lk)("div",x,[o.hasRunProgram?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("div",{key:0,class:"icon-btn run-btn",onClick:t[10]||(t[10]=e=>l.runScript()),title:"Run (F5)"},[(0,u.bF)(s,{size:20})])),o.hasRunProgram?((0,u.uX)(),(0,u.CE)("div",{key:1,class:"icon-btn stop-btn",onClick:t[11]||(t[11]=e=>l.stopScript()),title:"Stop (Shift+F5)"},[(0,u.bF)(a,{size:20})])):(0,u.Q3)("",!0)]),(0,u.Lk)("div",E,[(0,u.Lk)("div",{class:"icon-btn",onClick:t[12]||(t[12]=e=>l.openUploadDialog()),title:"Import File"},[(0,u.bF)(d,{size:20})]),(0,u.Lk)("div",{class:"icon-btn settings-btn",onClick:t[13]||(t[13]=e=>l.openSettings()),title:"Settings"},[(0,u.bF)(r,{size:20})])])])}var T=o(75365),$=o(47478),A=o(58263),W=o(53957);
/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const U=(0,W.A)("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]);var M=o(39037),X=o(96763),j={props:{consoleLimit:Boolean,hasRunProgram:Boolean},data(){return{isRun:!0,activeDropdown:null}},computed:{ideInfo(){return this.$store?.state?.ide?.ideInfo||{}},isPythonFile(){return this.ideInfo.currProj&&this.ideInfo.currProj.pathSelected&&this.ideInfo.codeItems&&this.ideInfo.codeItems.length>0&&this.ideInfo.currProj.pathSelected.endsWith(".py")},hasSelectedFile(){return this.ideInfo.nodeSelected&&"file"===this.ideInfo.nodeSelected.type}},components:{Upload:T.A,Play:$.A,Square:A.A,Terminal:U,Settings:M.A},mounted(){const e=localStorage.getItem("theme")||"dark";document.documentElement.setAttribute("data-theme",e),document.addEventListener("click",this.closeDropdowns),document.addEventListener("keydown",this.handleKeyboardShortcuts)},beforeUnmount(){document.removeEventListener("click",this.closeDropdowns),document.removeEventListener("keydown",this.handleKeyboardShortcuts)},methods:{toggleDropdown(e){this.activeDropdown=this.activeDropdown===e?null:e},closeDropdowns(){this.activeDropdown=null},handleKeyboardShortcuts(e){e.ctrlKey&&"s"===e.key&&(e.preventDefault(),this.saveFile()),e.ctrlKey&&"n"===e.key&&(e.preventDefault(),this.newFile()),"F5"!==e.key||e.shiftKey||!this.isPythonFile||this.consoleLimit||(e.preventDefault(),this.runScript()),e.shiftKey&&"F5"===e.key&&this.hasRunProgram&&(e.preventDefault(),this.stopScript())},newFile(){if(this.closeDropdowns(),!this.ideInfo.nodeSelected||"dir"!==this.ideInfo.nodeSelected.type&&"folder"!==this.ideInfo.nodeSelected.type){const e=this.ideInfo.currProj?.data;e&&this.$store.commit("ide/setNodeSelected",e)}this.$emit("set-text-dialog",{type:"create-file",title:"New File",tips:"Enter file name:",text:"untitled.py"})},addFile(){this.newFile()},addFolder(){if(this.closeDropdowns(),!this.ideInfo.nodeSelected||"dir"!==this.ideInfo.nodeSelected.type&&"folder"!==this.ideInfo.nodeSelected.type){const e=this.ideInfo.currProj?.data;e&&this.$store.commit("ide/setNodeSelected",e)}this.$emit("set-text-dialog",{type:"create-folder",title:"New Folder",tips:"Enter folder name:",text:"new_folder"})},saveFile(){this.closeDropdowns(),this.ideInfo.codeSelected&&(this.$store.dispatch("ide/saveFile",this.ideInfo.codeSelected),this.$message.success("File saved"))},downloadFile(){this.closeDropdowns(),this.ideInfo.nodeSelected&&"file"===this.ideInfo.nodeSelected.type?this.$emit("download-file"):this.ideInfo.codeSelected?this.$emit("download-file",this.ideInfo.codeSelected):this.$message.warning("Please select a file to download")},openUploadDialog(){this.closeDropdowns(),this.$emit("open-upload-dialog")},runScript(){this.closeDropdowns(),this.$emit("run-item")},stopScript(){this.closeDropdowns();for(let e=0;e<this.ideInfo.consoleItems.length;e++)!0===this.ideInfo.consoleItems[e].run&&this.$store.commit("ide/setConsoleItemRun",{index:e,value:!1});this.$emit("stop-item",null)},openREPL(){this.$emit("open-repl")},openSettings(){this.$emit("open-settings")},openFile(){this.closeDropdowns(),this.$emit("open-file-browser")},duplicateFile(){if(X.log("ðŸ” [DEBUG] duplicateFile() called from TopMenu"),this.closeDropdowns(),!this.hasSelectedFile)return X.log("ðŸ” [DEBUG] No file selected for duplication"),void this.$message.warning("Please select a file to duplicate");const e=this.ideInfo.nodeSelected,t=e.label||e.name,o=t.includes(".")?t.substring(t.lastIndexOf(".")):"",i=t.includes(".")?t.substring(0,t.lastIndexOf(".")):t,n=`${i}_copy${o}`;X.log("ðŸ” [DEBUG] Emitting duplicate-file event:",{originalPath:e.path,newName:n,projectName:e.projectName||this.ideInfo.currProj?.data?.name}),this.$emit("duplicate-file",{originalPath:e.path,newName:n,projectName:e.projectName||this.ideInfo.currProj?.data?.name})},saveAsFile(){if(this.closeDropdowns(),this.hasSelectedFile){const e=this.ideInfo.nodeSelected,t={fileName:e.label||e.name,filePath:e.path,projectName:e.projectName||this.ideInfo.currProj?.data?.name};return void this.$emit("save-as-file",t)}this.ideInfo.codeSelected?this.$emit("save-as-file",this.ideInfo.codeSelected):this.$message.warning("Please select a file to save")},moveFile(){this.closeDropdowns(),this.hasSelectedFile?this.$emit("open-move-dialog",this.ideInfo.nodeSelected):this.$message.warning("Please select a file to move")},deleteFile(){if(this.closeDropdowns(),!this.hasSelectedFile)return void this.$message.warning("Please select a file to delete");const e=this.ideInfo.nodeSelected,t=e.label||e.name;this.$confirm(`Are you sure you want to delete "${t}"?`,"Confirm Delete",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning"}).then(()=>{this.$emit("delete-file",{path:e.path,type:e.type,projectName:e.projectName||this.ideInfo.currProj?.data?.name})}).catch(()=>{})}}},O=o(66262);const N=(0,O.A)(j,[["render",R],["__scopeId","data-v-3279637f"]]);var Q=N,V=o(90033);const K={class:"main-wrapper ide-wrapper ide-container"},B={id:"total-frame",class:"total-frame"},G={class:"left-sidebar"},q={class:"editor-section"},Z={class:"editor-tab-bar"},H={class:"editor-content"},J={class:"console-section"},Y={class:"console-header"},ee={class:"console-header-left"},te={class:"console-title"},oe={class:"console-header-center"},ie={class:"console-header-right"},ne={class:"console-content"},le={class:"right-sidebar"},se={class:"preview-tabs"},ae={class:"preview-tabs-header"},de={class:"preview-tabs-list"},re=["onClick"],ce=["onClick"],pe={key:0,class:"html-preview-panel"},he=["src"],ue={key:1,class:"image-preview-panel"},me=["src","alt"],ve={key:2,class:"pdf-preview-panel"},ge=["src"],fe={key:3,class:"data-preview-panel"},ke={key:4,class:"repl-modal"},Se={class:"repl-modal-content"},we={class:"repl-modal-header"},be={class:"repl-modal-body"};function Ce(e,t,o,v,g,f){const k=Q,S=h.A,w=p.A,b=(0,u.g2)("pane"),C=c.A,I=r.A,L=(0,u.g2)("ChevronUp"),D=(0,u.g2)("Minimize2"),P=(0,u.g2)("ChevronDown"),F=(0,u.g2)("splitpanes"),y=d.A,z=a.A,_=s.A,x=l.A,E=n.A,R=i.A;return(0,u.uX)(),(0,u.CE)("div",K,[(0,u.bF)(k,{class:"top-menu",consoleLimit:e.consoleLimit,hasRunProgram:e.hasRunProgram,wordWrap:e.wordWrap,onSetTextDialog:e.setTextDialog,onSetDelDialog:e.setDelDialog,onSetProjsDialog:e.setProjsDialog,onRunItem:e.runPathSelected,onStopItem:e.stop,onThemeChanged:e.handleThemeChange,onToggleWordWrap:e.toggleWordWrap,onOpenUploadDialog:t[0]||(t[0]=t=>e.showUploadDialog=!0),onDownloadFile:e.downloadFile,onOpenRepl:e.openREPL,onOpenSettings:t[1]||(t[1]=t=>e.showSettingsModal=!0)},null,8,["consoleLimit","hasRunProgram","wordWrap","onSetTextDialog","onSetDelDialog","onSetProjsDialog","onRunItem","onStopItem","onThemeChanged","onToggleWordWrap","onDownloadFile","onOpenRepl"]),(0,u.bF)(S,{modelValue:e.showSettingsModal,"onUpdate:modelValue":t[2]||(t[2]=t=>e.showSettingsModal=t),onUpdateLineNumbers:e.updateLineNumbers,onUpdateWordWrap:e.updateWordWrap,onUpdateAutoSave:e.updateAutoSave,onUpdateAutoSaveInterval:e.updateAutoSaveInterval},null,8,["modelValue","onUpdateLineNumbers","onUpdateWordWrap","onUpdateAutoSave","onUpdateAutoSaveInterval"]),(0,u.Lk)("div",B,[(0,u.bF)(F,{class:"default-theme"},{default:(0,u.k6)(()=>[g.leftSidebarVisible?((0,u.uX)(),(0,u.Wv)(b,{key:0,size:g.leftPaneSize,"min-size":10,"max-size":30},{default:(0,u.k6)(()=>[(0,u.Lk)("div",G,[(0,u.bF)(w,{onGetItem:e.getFile,onContextMenu:e.showContextMenu},null,8,["onGetItem","onContextMenu"])])]),_:1},8,["size"])):(0,u.Q3)("",!0),(0,u.bF)(b,{size:f.centerPaneSize},{default:(0,u.k6)(()=>[(0,u.bF)(F,{horizontal:"",class:"editor-console-split"},{default:(0,u.k6)(()=>[(0,u.bF)(b,{size:g.editorPaneSize,"min-size":30},{default:(0,u.k6)(()=>[(0,u.Lk)("div",q,[(0,u.Lk)("div",Z,[e.ideInfo.codeItems.length>0?((0,u.uX)(),(0,u.Wv)(C,{key:0,onSelectItem:e.selectFile,onCloseItem:e.closeFile,onToggleSidebar:f.toggleLeftSidebar},null,8,["onSelectItem","onCloseItem","onToggleSidebar"])):(0,u.Q3)("",!0)]),(0,u.Lk)("div",H,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(e.ideInfo.codeItems,(t,o)=>((0,u.uX)(),(0,u.CE)(u.FK,{key:t.path+o},[e.ideInfo.codeSelected.path===t.path?((0,u.uX)(),(0,u.Wv)(I,{key:0,codeItem:t,codeItemIndex:o,consoleLimit:e.consoleLimit,wordWrap:e.wordWrap,onRunItem:e.runPathSelected,onUpdateItem:e.updateItem},null,8,["codeItem","codeItemIndex","consoleLimit","wordWrap","onRunItem","onUpdateItem"])):(0,u.Q3)("",!0)],64))),128))])])]),_:1},8,["size"]),(0,u.bF)(b,{size:g.consolePaneSize,"min-size":5,"max-size":70},{default:(0,u.k6)(()=>[(0,u.Lk)("div",J,[(0,u.Lk)("div",Y,[(0,u.Lk)("div",ee,[(0,u.Lk)("span",te,(0,V.v_)(g.isReplMode?"Python REPL":"Console"),1)]),(0,u.Lk)("div",oe,[g.consoleMaximized?(0,u.Q3)("",!0):((0,u.uX)(),(0,u.CE)("button",{key:0,class:"console-expand-arrow",onClick:t[3]||(t[3]=(...e)=>f.expandConsole&&f.expandConsole(...e)),title:"Maximize console"},[(0,u.bF)(L,{size:16})])),g.consoleMaximized?((0,u.uX)(),(0,u.CE)("button",{key:1,class:"console-expand-arrow",onClick:t[4]||(t[4]=(...e)=>f.restoreConsole&&f.restoreConsole(...e)),title:"Restore console"},[(0,u.bF)(D,{size:16})])):(0,u.Q3)("",!0)]),(0,u.Lk)("div",ie,[(0,u.Lk)("button",{class:(0,V.C4)(["console-toggle-btn",{active:g.isReplMode}]),onClick:t[5]||(t[5]=(...e)=>f.toggleReplMode&&f.toggleReplMode(...e))},(0,V.v_)(g.isReplMode?"Console":"REPL"),3),(0,u.Lk)("button",{class:"console-collapse-btn",onClick:t[6]||(t[6]=(...e)=>f.toggleConsole&&f.toggleConsole(...e))},[(0,u.bF)(P,{size:16})])])]),(0,u.Lk)("div",ne,[e.wsInfo&&e.wsInfo.connected?((0,u.uX)(),(0,u.Wv)((0,u.$y)(f.currentConsoleComponent),{key:0,"is-repl-mode":g.isReplMode,"repl-session-id":g.replSessionId,onSessionStarted:e.handleReplSessionStarted,onSessionEnded:e.handleReplSessionEnded},null,40,["is-repl-mode","repl-session-id","onSessionStarted","onSessionEnded"])):(0,u.Q3)("",!0)])])]),_:1},8,["size"])]),_:1})]),_:1},8,["size"]),g.rightSidebarVisible&&g.previewTabs.length>0?((0,u.uX)(),(0,u.Wv)(b,{key:1,size:g.rightPaneSize,"min-size":15,"max-size":40},{default:(0,u.k6)(()=>[(0,u.Lk)("div",le,[(0,u.Lk)("div",se,[(0,u.Lk)("div",ae,[t[11]||(t[11]=(0,u.Lk)("span",null,"Preview",-1)),(0,u.Lk)("button",{onClick:t[7]||(t[7]=(...t)=>e.closeAllPreviews&&e.closeAllPreviews(...t)),class:"close-all-btn"},"âœ•")]),(0,u.Lk)("div",de,[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(g.previewTabs,(t,o)=>((0,u.uX)(),(0,u.CE)("div",{key:o,class:(0,V.C4)(["preview-tab",{active:g.selectedPreviewTab===o}]),onClick:t=>e.selectPreviewTab(o)},[(0,u.Lk)("span",null,(0,V.v_)(t.title),1),(0,u.Lk)("button",{onClick:(0,m.D$)(t=>e.closePreviewTab(o),["stop"]),class:"tab-close"},"âœ•",8,ce)],10,re))),128))])]),((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(g.previewTabs,(e,t)=>(0,u.bo)(((0,u.uX)(),(0,u.CE)("div",{key:t,class:"preview-content"},["html"===e.type?((0,u.uX)(),(0,u.CE)("div",pe,[(0,u.Lk)("iframe",{src:e.content,frameborder:"0"},null,8,he)])):"image"===e.type?((0,u.uX)(),(0,u.CE)("div",ue,[(0,u.Lk)("img",{src:e.content,alt:e.title},null,8,me)])):"pdf"===e.type?((0,u.uX)(),(0,u.CE)("div",ve,[(0,u.Lk)("iframe",{src:e.content,frameborder:"0"},null,8,ge)])):"data"===e.type?((0,u.uX)(),(0,u.CE)("div",fe,[(0,u.bF)(y,{content:e.content},null,8,["content"])])):(0,u.Q3)("",!0)],512)),[[m.aG,g.selectedPreviewTab===t]])),128))])]),_:1},8,["size"])):(0,u.Q3)("",!0)]),_:1})]),e.showProjsDialog?((0,u.uX)(),(0,u.Wv)(z,{key:0,onOnCancel:e.onCloseProjsDialog,onOnSelect:e.onSelectProj,onOnDelete:e.onDeleteProj,onSetTextDialog:e.setTextDialog},null,8,["onOnCancel","onOnSelect","onOnDelete","onSetTextDialog"])):(0,u.Q3)("",!0),e.showFileDialog?((0,u.uX)(),(0,u.Wv)(_,{key:1,title:e.dialogTitle,text:e.dialogText,tips:e.dialogTips,onCheckInput:e.inputIsLegal,onOnCancel:e.onCloseTextDialog,onOnCreate:e.onCreate},null,8,["title","text","tips","onCheckInput","onOnCancel","onOnCreate"])):(0,u.Q3)("",!0),e.showDeleteDialog?((0,u.uX)(),(0,u.Wv)(x,{key:2,title:e.dialogTitle,onOnCancel:e.onCancelDelete,onOnDelete:e.onDelete},null,8,["title","onOnCancel","onOnDelete"])):(0,u.Q3)("",!0),e.showUploadDialog?((0,u.uX)(),(0,u.Wv)(E,{key:3,modelValue:e.showUploadDialog,"onUpdate:modelValue":t[8]||(t[8]=t=>e.showUploadDialog=t),onRefreshTree:e.refreshProjectTree,onClose:t[9]||(t[9]=t=>e.showUploadDialog=!1)},null,8,["modelValue","onRefreshTree"])):(0,u.Q3)("",!0),e.showREPL?((0,u.uX)(),(0,u.CE)("div",ke,[(0,u.Lk)("div",Se,[(0,u.Lk)("div",we,[t[12]||(t[12]=(0,u.Lk)("h3",null,"Python REPL (Interactive Console)",-1)),(0,u.Lk)("button",{onClick:t[10]||(t[10]=(...t)=>e.closeREPL&&e.closeREPL(...t)),class:"repl-close-btn"},"âœ•")]),(0,u.Lk)("div",be,[(0,u.bF)(R)])])])):(0,u.Q3)("",!0)])}var Ie=o(99415),Le={name:"VmIdeWithSplitpanes",components:{Splitpanes:Ie.S,Pane:Ie.Z},data(){return{leftPaneSize:20,centerPaneSize:60,rightPaneSize:20,editorPaneSize:70,consolePaneSize:30,leftSidebarVisible:!0,rightSidebarVisible:!1,consoleMaximized:!1,isReplMode:!1,replSessionId:null,previewTabs:[],selectedPreviewTab:0}},computed:{currentConsoleComponent(){return"UnifiedConsole"},centerPaneSize(){return this.rightSidebarVisible&&this.previewTabs.length>0?100-this.leftPaneSize-this.rightPaneSize:100-this.leftPaneSize}},methods:{toggleConsole(){this.consolePaneSize>10?this.consolePaneSize=5:this.consolePaneSize=30},expandConsole(){this.consoleMaximized=!0,this.consolePaneSize=70},restoreConsole(){this.consoleMaximized=!1,this.consolePaneSize=30},toggleLeftSidebar(e){this.leftSidebarVisible=e},toggleReplMode(){this.isReplMode=!this.isReplMode}}};const De=(0,O.A)(Le,[["render",Ce],["__scopeId","data-v-06ebe7e2"]]);var Pe=De}}]);